function JetpackLikespostMessage(e,t){if("string"==typeof e)try{e=JSON.parse(e)}catch(e){return}pm({target:t,type:"likesMessage",data:e,origin:"*"})}function JetpackLikesBatchHandler(){var e=[];jQuery("div.jetpack-likes-widget-unloaded").each(function(){if(!(jetpackLikesWidgetBatch.indexOf(this.id)>-1)){jetpackLikesWidgetBatch.push(this.id);var t,a=/like-(post|comment)-wrapper-(\d+)-(\d+)-(\w+)/.exec(this.id);a&&5===a.length&&(t={blog_id:a[2],width:this.width},"post"===a[1]?t.post_id=a[3]:"comment"===a[1]&&(t.comment_id=a[3]),t.obj_id=a[4],e.push(t))}}),e.length>0&&JetpackLikespostMessage({event:"initialBatch",requests:e},window.frames["likes-master"])}function JetpackLikesMessageListener(e,t){var a,i,n,o,r,s;void 0!==e.event&&window.location.protocol+"//web.archive.org/web/20180107091706/https://widgets.wp.com/"===t.origin&&("masterReady"===e.event&&jQuery(document).ready(function(){jetpackLikesMasterReady=!0;var e={event:"injectStyles"},t=jQuery(".sd-text-color"),a=jQuery(".sd-link-color");jQuery("iframe.admin-bar-likes-widget").length>0&&(JetpackLikespostMessage({event:"adminBarEnabled"},window.frames["likes-master"]),e.adminBarStyles={background:jQuery("#wpadminbar .quicklinks li#wp-admin-bar-wpl-like > a").css("background"),isRtl:"rtl"===jQuery("#wpadminbar").css("direction")}),window.addEventListener||jQuery("#wp-admin-bar-admin-bar-likes-widget").hide(),e.textStyles={color:t.css("color"),fontFamily:t.css("font-family"),fontSize:t.css("font-size"),direction:t.css("direction"),fontWeight:t.css("font-weight"),fontStyle:t.css("font-style"),textDecoration:t.css("text-decoration")},e.linkStyles={color:a.css("color"),fontFamily:a.css("font-family"),fontSize:a.css("font-size"),textDecoration:a.css("text-decoration"),fontWeight:a.css("font-weight"),fontStyle:a.css("font-style")},JetpackLikespostMessage(e,window.frames["likes-master"]),JetpackLikesBatchHandler(),jQuery(document).on("inview","div.jetpack-likes-widget-unloaded",function(){jetpackLikesWidgetQueue.push(this.id)})}),"showLikeWidget"===e.event&&jQuery("#"+e.id+" .post-likes-widget-placeholder").fadeOut("fast",function(){jQuery("#"+e.id+" .post-likes-widget").fadeIn("fast",function(){JetpackLikespostMessage({event:"likeWidgetDisplayed",blog_id:e.blog_id,post_id:e.post_id,obj_id:e.obj_id},window.frames["likes-master"])})}),"clickReblogFlair"===e.event&&wpcom_reblog.toggle_reblog_box_flair(e.obj_id),"showOtherGravatars"===e.event&&(a=jQuery("#likes-other-gravatars"),i=a.find("ul"),a.hide(),i.html(""),a.find(".likes-text span").text(e.total),jQuery.each(e.likers,function(e,t){var a=jQuery("<li><a><img /></a></li>");a.addClass(t.css_class),a.find("a").attr({href:t.profile_URL,rel:"nofollow",target:"_parent"}).addClass("wpl-liker"),a.find("img").attr({src:t.avatar_URL,alt:t.name}).css({width:"30px",height:"30px",paddingRight:"3px"}),i.append(a)}),n=jQuery("[name='"+e.parent+"']").offset(),a.css("left",n.left+e.position.left-10+"px"),a.css("top",n.top+e.position.top-33+"px"),o=Math.floor(e.width/37),(r=37*Math.ceil(e.likers.length/o)+13)>204&&(r=204),a.css("height",r+"px"),a.css("width",37*o-7+"px"),i.css("width",37*o+"px"),a.fadeIn("slow"),(s=i[0].offsetWidth-i[0].clientWidth)>0&&(a.width(a.width()+s),i.width(i.width()+s))))}function JetpackLikesWidgetQueueHandler(){var e,t,a;if(jetpackLikesMasterReady){if(jetpackLikesWidgetQueue.length>0){for(a=!1;jetpackLikesWidgetQueue.length>0;)if(t=jetpackLikesWidgetQueue.splice(0,1)[0],jQuery("#"+t).hasClass("jetpack-likes-widget-unloaded")){a=!0;break}if(!a)return void setTimeout(JetpackLikesWidgetQueueHandler,500)}else if(jQuery("div.jetpack-likes-widget-unloaded").length>0&&(JetpackLikesBatchHandler(),!(t=jQuery("div.jetpack-likes-widget-unloaded").first()[0].id)))return void setTimeout(JetpackLikesWidgetQueueHandler,500);void 0!==t?((e=jQuery("#"+t)).find("iframe").remove(),e.hasClass("slim-likes-widget")?e.find(".post-likes-widget-placeholder").after('<iframe class="post-likes-widget jetpack-likes-widget" name="'+e.data("name")+'" height="22px" width="68px" frameBorder="0" scrolling="no" src="'+e.data("src")+'"></iframe>'):e.find(".post-likes-widget-placeholder").after('<iframe class="post-likes-widget jetpack-likes-widget" name="'+e.data("name")+'" height="55px" width="100%" frameBorder="0" src="'+e.data("src")+'"></iframe>'),e.removeClass("jetpack-likes-widget-unloaded").addClass("jetpack-likes-widget-loading"),e.find("iframe").load(function(t){var a=jQuery(t.target);e.removeClass("jetpack-likes-widget-loading").addClass("jetpack-likes-widget-loaded"),JetpackLikespostMessage({event:"loadLikeWidget",name:a.attr("name"),width:a.width()},window.frames["likes-master"]),e.hasClass("slim-likes-widget")&&e.find("iframe").Jetpack("resizeable")}),setTimeout(JetpackLikesWidgetQueueHandler,250)):setTimeout(JetpackLikesWidgetQueueHandler,500)}else setTimeout(JetpackLikesWidgetQueueHandler,500)}function getInternetExplorerVersion(){var e=-1;if("Microsoft Internet Explorer"==navigator.appName){var t=navigator.userAgent;null!=new RegExp("Trident/([0-9]{1,}[.0-9]{0,})").exec(t)&&(e=parseFloat(RegExp.$1)),3==e?e=7:4==e?e=8:5==e?e=9:6==e&&(e=10)}return e}function use_tinyscroller(){return!("ontouchstart"in document.documentElement)}function set_scroller_height(){$_viewport=jQuery(".viewport");var e=jQuery(window).height(),t=$_viewport.offset().top,a=$_viewport.position().top;"undefined"!==window.matchMedia&&window.matchMedia("(min-width: 1000px)").matches?$_viewport.height(e-a):$_viewport.height(e-t),$_viewport.removeAttr("style"),$_viewport.attr("style","overflow:auto"),jQuery("#scrollbar1 .scrollbar").hide()}function viewport(){var e=window,t="inner";return"innerWidth"in window||(t="client",e=document.documentElement||document.body),{width:e[t+"Width"],height:e[t+"Height"]}}!function(e,t,a){"use strict";"undefined"!=typeof module&&module.exports?module.exports=a():"function"==typeof define&&define.amd?define("factory",function(){return a()}):e[t]=a()}(window,"detectZoom",function(){var e=function(){return window.devicePixelRatio||1},t=function(){return{zoom:1,devicePxPerCssPx:1}},a=function(){var t=Math.round(screen.deviceXDPI/screen.logicalXDPI*100)/100;return{zoom:t,devicePxPerCssPx:t*e()}},i=function(){var t=Math.round(document.documentElement.offsetHeight/window.innerHeight*100)/100;return{zoom:t,devicePxPerCssPx:t*e()}},n=function(){var t=(90==Math.abs(window.orientation)?screen.height:screen.width)/window.innerWidth;return{zoom:t,devicePxPerCssPx:t*e()}},o=function(){var t=function(e){return e.replace(/;/g," !important;")},a=document.createElement("div");a.innerHTML="1<br>2<br>3<br>4<br>5<br>6<br>7<br>8<br>9<br>0",a.setAttribute("style",t("font: 100px/1em sans-serif; -webkit-text-size-adjust: none; text-size-adjust: none; height: auto; width: 1em; padding: 0; overflow: visible;"));var i=document.createElement("div");i.setAttribute("style",t("width:0; height:0; overflow:hidden; visibility:hidden; position: absolute;")),i.appendChild(a),document.body.appendChild(i);var n=1e3/a.clientHeight;return n=Math.round(100*n)/100,document.body.removeChild(i),{zoom:n,devicePxPerCssPx:n*e()}},r=function(){var e=c("min--moz-device-pixel-ratio","",0,10,20,1e-4);return e=Math.round(100*e)/100,{zoom:e,devicePxPerCssPx:e}},s=function(){return{zoom:r().zoom,devicePxPerCssPx:e()}},l=function(){var t=window.top.outerWidth/window.top.innerWidth;return t=Math.round(100*t)/100,{zoom:t,devicePxPerCssPx:t*e()}},c=function(e,t,a,i,n,o){function r(a,i,n){var l=(a+i)/2;return n<=0||i-a<o?l:s("("+e+":"+l+t+")").matches?r(l,i,n-1):r(a,l,n-1)}var s,l,c,d;window.matchMedia?s=window.matchMedia:(l=document.getElementsByTagName("head")[0],c=document.createElement("style"),l.appendChild(c),(d=document.createElement("div")).className="mediaQueryBinarySearch",d.style.display="none",document.body.appendChild(d),s=function(e){c.sheet.insertRule("@media "+e+"{.mediaQueryBinarySearch {text-decoration: underline} }",0);var t="underline"==getComputedStyle(d,null).textDecoration;return c.sheet.deleteRule(0),{matches:t}});var u=r(a,i,n);return d&&(l.removeChild(c),document.body.removeChild(d)),u},d=function(){var e=t;return isNaN(screen.logicalXDPI)||isNaN(screen.systemXDPI)?window.navigator.msMaxTouchPoints?e=i:"orientation"in window&&"string"==typeof document.body.style.webkitMarquee?e=n:"string"==typeof document.body.style.webkitMarquee?e=o:navigator.userAgent.indexOf("Opera")>=0?e=l:window.devicePixelRatio?e=s:r().zoom>.001&&(e=r):e=a,e}();return{zoom:function(){return d().zoom},device:function(){return d().devicePxPerCssPx}}});var wpcom_img_zoomer={clientHintSupport:{gravatar:!1,files:!1,photon:!1,mshots:!1,staticAssets:!1,latex:!1,imgpress:!1},useHints:!1,zoomed:!1,timer:null,interval:1e3,imgNeedsSizeAtts:function(e){return null===e.getAttribute("width")&&null===e.getAttribute("height")&&!(e.width<e.naturalWidth||e.height<e.naturalHeight)},hintsFor:function(e){return!1!==this.useHints&&(!1!==this.hints()&&(void 0!==this.clientHintSupport[e]&&!0===this.clientHintSupport[e]))},hints:function(){try{var e=window.navigator.userAgent.match(/\sChrome\/([0-9]+)\.[.0-9]+\s/);if(null!==e){var t=parseInt(e[1],10);if(!1===isNaN(t)&&t>=46)return!0}}catch(e){return!1}return!1},init:function(){var e=this;try{e.zoomImages(),e.timer=setInterval(function(){e.zoomImages()},e.interval)}catch(e){}},stop:function(){this.timer&&clearInterval(this.timer)},getScale:function(){var e=detectZoom.device();return e=e<=1?1:e<=1.5?1.5:e<=2?2:e<=3?3:e<=4?4:5},shouldZoom:function(e){var t=this;return!("innerWidth"in window&&!window.innerWidth)&&(1!=e||0!=t.zoomed)},zoomImages:function(){var e=this,t=e.getScale();if(e.shouldZoom(t)){e.zoomed=!0;for(var a=document.getElementsByTagName("img"),i=0;i<a.length;i++)if((!("complete"in a[i])||a[i].complete)&&!a[i].hasAttribute("srcset")){var n=a[i].getAttribute("scale");if(n!=t&&"0"!=n){var o=a[i].getAttribute("scale-fail");o&&o<=t||a[i].width&&a[i].height&&(!n&&a[i].getAttribute("data-lazy-src")&&a[i].getAttribute("data-lazy-src")!==a[i].getAttribute("src")||(e.scaleImage(a[i],t)?a[i].setAttribute("scale",t):a[i].setAttribute("scale","0")))}}}},scaleImage:function(e,t){var a=this,i=e.src,n=!1,o=!1,r=!1;if(e.parentNode.className.match(/slideshow-slide/))return!1;if(e.src.match(/^https?:\/\/([^\/]*\.)?gravatar\.com\/.+[?&](s|size)=/)){if(!0===this.hintsFor("gravatar"))return!1;i=e.src.replace(/([?&](s|size)=)(\d+)/,function(i,n,o,r){var s=e.getAttribute("originals");null===s&&(s=r,e.setAttribute("originals",s),a.imgNeedsSizeAtts(e)&&(e.width=e.width,e.height=e.height));e.clientWidth;var l=Math.ceil(e.clientWidth*t);return l=Math.max(l,s),l=Math.min(l,512),n+l})}else if(e.src.match(/^https?:\/\/([^\/]+\.)*(wordpress|wp)\.com\/mshots\/.+[?&]w=\d+/)){if(!0===this.hintsFor("mshots"))return!1;i=e.src.replace(/([?&]w=)(\d+)/,function(i,n,o){var r=e.getAttribute("originalw");null===r&&(r=o,e.setAttribute("originalw",r),a.imgNeedsSizeAtts(e)&&(e.width=e.width,e.height=e.height));var s=e.clientWidth,l=Math.ceil(s*t);return l=Math.max(l,r),t>e.getAttribute("scale")&&l<=e.naturalWidth&&(l=o),o!=l?n+l:i}),i=i.replace(/([?&]h=)(\d+)/,function(a,n,o){if(i==e.src)return a;var r=e.getAttribute("originalh");null===r&&(r=o,e.setAttribute("originalh",r));var s=e.clientHeight,l=Math.ceil(s*t);return l=Math.max(l,r),t>e.getAttribute("scale")&&l<=e.naturalHeight&&(l=o),o!=l?n+l:a})}else if(e.src.match(/^https?:\/\/([^\/.]+\.)*(wp|wordpress)\.com\/imgpress\?(.+)/)){if(!0===this.hintsFor("imgpress"))return!1;var s=["zoom","url","h","w","fit","filter","brightness","contrast","colorize","smooth","unsharpmask"],l=RegExp.$3.split("&");for(var c in l)if(c=l[c].split("=")[0],-1==s.indexOf(c))return!1;e.width=e.width,e.height=e.height,i=1==t?e.src.replace(/\?(zoom=[^&]+&)?/,"?"):e.src.replace(/\?(zoom=[^&]+&)?/,"?zoom="+t+"&")}else if((n=e.src.match(/^https?:\/\/([^\/]+)\.files\.wordpress\.com\/.+[?&][wh]=/))||(o=e.src.match(/^https?:\/\/([^\/.]+\.)*(wp|wordpress)\.com\/latex\.php\?(latex|zoom)=(.+)/))||(r=e.src.match(/^https?:\/\/i[\d]{1}\.wp\.com\/(.+)/))){if(!1!==n&&!0===this.hintsFor("files"))return!1;if(!1!==o&&!0===this.hintsFor("latex"))return!1;if(!1!==r&&!0===this.hintsFor("photon"))return!1;if(e.width=e.width,e.height=e.height,1==t)i=e.src.replace(/\?(zoom=[^&]+&)?/,"?");else{var d=(i=e.src).match(/([?&]w=)(\d+)/);null!==d&&d[2]&&(i=i.replace(d[0],d[1]+e.width)),null!==(d=i.match(/([?&]h=)(\d+)/))&&d[2]&&(i=i.replace(d[0],d[1]+e.height));var u="&zoom=2";i.match(/\?/)||(u="?zoom=2"),e.setAttribute("srcset",i+u+" "+t+"x")}}else{if(!e.src.match(/^https?:\/\/[^\/]+\/.*[-@]([12])x\.(gif|jpeg|jpg|png)(\?|$)/))return!1;if(!0===this.hintsFor("staticAssets"))return!1;e.width=e.width,e.height=e.height;var p=RegExp.$1,m=p;p!=(m=t<=1?1:2)&&(i=e.src.replace(/([-@])[12]x\.(gif|jpeg|jpg|png)(\?|$)/,"$1"+m+"x.$2$3"))}if(i!=e.src){var f,h=e.getAttribute("src-orig");h||(h=e.src,e.setAttribute("src-orig",h)),f=e.src,e.onerror=function(){e.src=f,e.getAttribute("scale-fail")<t&&e.setAttribute("scale-fail",t),e.onerror=null},e.src=i}return!0}};wpcom_img_zoomer.init();var jetpackLikesWidgetQueue=[],jetpackLikesWidgetBatch=[],jetpackLikesMasterReady=!1;if(pm.bind("likesMessage",JetpackLikesMessageListener),jQuery(document).click(function(e){var t=jQuery("#likes-other-gravatars");0===t.has(e.target).length&&t.fadeOut("slow")}),JetpackLikesWidgetQueueHandler(),function(e){var t=!0;e.flexslider=function(a,i){var n=e(a);n.vars=e.extend({},e.flexslider.defaults,i);var o,r=n.vars.namespace,s=window.navigator&&window.navigator.msPointerEnabled&&window.MSGesture,l=("ontouchstart"in window||s||window.DocumentTouch&&document instanceof DocumentTouch)&&n.vars.touch,c="click touchend MSPointerUp keyup",d="",u="vertical"===n.vars.direction,p=n.vars.reverse,m=n.vars.itemWidth>0,f="fade"===n.vars.animation,h=""!==n.vars.asNavFor,g={};e.data(a,"flexslider",n),g={init:function(){n.animating=!1,n.currentSlide=parseInt(n.vars.startAt?n.vars.startAt:0,10),isNaN(n.currentSlide)&&(n.currentSlide=0),n.animatingTo=n.currentSlide,n.atEnd=0===n.currentSlide||n.currentSlide===n.last,n.containerSelector=n.vars.selector.substr(0,n.vars.selector.search(" ")),n.slides=e(n.vars.selector,n),n.container=e(n.containerSelector,n),n.count=n.slides.length,n.syncExists=e(n.vars.sync).length>0,"slide"===n.vars.animation&&(n.vars.animation="swing"),n.prop=u?"top":"marginLeft",n.args={},n.manualPause=!1,n.stopped=!1,n.started=!1,n.startTimeout=null,n.transitions=!n.vars.video&&!f&&n.vars.useCSS&&function(){var e=document.createElement("div"),t=["perspectiveProperty","WebkitPerspective","MozPerspective","OPerspective","msPerspective"];for(var a in t)if(void 0!==e.style[t[a]])return n.pfx=t[a].replace("Perspective","").toLowerCase(),n.prop="-"+n.pfx+"-transform",!0;return!1}(),n.ensureAnimationEnd="",""!==n.vars.controlsContainer&&(n.controlsContainer=e(n.vars.controlsContainer).length>0&&e(n.vars.controlsContainer)),""!==n.vars.manualControls&&(n.manualControls=e(n.vars.manualControls).length>0&&e(n.vars.manualControls)),""!==n.vars.customDirectionNav&&(n.customDirectionNav=2===e(n.vars.customDirectionNav).length&&e(n.vars.customDirectionNav)),n.vars.randomize&&(n.slides.sort(function(){return Math.round(Math.random())-.5}),n.container.empty().append(n.slides)),n.doMath(),n.setup("init"),n.vars.controlNav&&g.controlNav.setup(),n.vars.directionNav&&g.directionNav.setup(),n.vars.keyboard&&(1===e(n.containerSelector).length||n.vars.multipleKeyboard)&&e(document).bind("keyup",function(e){var t=e.keyCode;if(!n.animating&&(39===t||37===t)){var a=39===t?n.getTarget("next"):37===t&&n.getTarget("prev");n.flexAnimate(a,n.vars.pauseOnAction)}}),n.vars.mousewheel&&n.bind("mousewheel",function(e,t,a,i){e.preventDefault();var o=t<0?n.getTarget("next"):n.getTarget("prev");n.flexAnimate(o,n.vars.pauseOnAction)}),n.vars.pausePlay&&g.pausePlay.setup(),n.vars.slideshow&&n.vars.pauseInvisible&&g.pauseInvisible.init(),n.vars.slideshow&&(n.vars.pauseOnHover&&n.hover(function(){n.manualPlay||n.manualPause||n.pause()},function(){n.manualPause||n.manualPlay||n.stopped||n.play()}),n.vars.pauseInvisible&&g.pauseInvisible.isHidden()||(n.vars.initDelay>0?n.startTimeout=setTimeout(n.play,n.vars.initDelay):n.play())),h&&g.asNav.setup(),l&&n.vars.touch&&g.touch(),(!f||f&&n.vars.smoothHeight)&&e(window).bind("resize orientationchange focus",g.resize),n.find("img").attr("draggable","false"),setTimeout(function(){n.vars.start(n)},200)},asNav:{setup:function(){n.asNav=!0,n.animatingTo=Math.floor(n.currentSlide/n.move),n.currentItem=n.currentSlide,n.slides.removeClass(r+"active-slide").eq(n.currentItem).addClass(r+"active-slide"),s?(a._slider=n,n.slides.each(function(){var t=this;t._gesture=new MSGesture,t._gesture.target=t,t.addEventListener("MSPointerDown",function(e){e.preventDefault(),e.currentTarget._gesture&&e.currentTarget._gesture.addPointer(e.pointerId)},!1),t.addEventListener("MSGestureTap",function(t){t.preventDefault();var a=e(this),i=a.index();e(n.vars.asNavFor).data("flexslider").animating||a.hasClass("active")||(n.direction=n.currentItem<i?"next":"prev",n.flexAnimate(i,n.vars.pauseOnAction,!1,!0,!0))})})):n.slides.on(c,function(t){t.preventDefault();var a=e(this),i=a.index();a.offset().left-e(n).scrollLeft()<=0&&a.hasClass(r+"active-slide")?n.flexAnimate(n.getTarget("prev"),!0):e(n.vars.asNavFor).data("flexslider").animating||a.hasClass(r+"active-slide")||(n.direction=n.currentItem<i?"next":"prev",n.flexAnimate(i,n.vars.pauseOnAction,!1,!0,!0))})}},controlNav:{setup:function(){n.manualControls?g.controlNav.setupManual():g.controlNav.setupPaging()},setupPaging:function(){var t,a,i="thumbnails"===n.vars.controlNav?"control-thumbs":"control-paging",o=1;if(n.controlNavScaffold=e('<ol class="'+r+"control-nav "+r+i+'"></ol>'),n.pagingCount>1)for(var s=0;s<n.pagingCount;s++){void 0===(a=n.slides.eq(s)).attr("data-thumb-alt")&&a.attr("data-thumb-alt","");var l=""!==a.attr("data-thumb-alt")?l=' alt="'+a.attr("data-thumb-alt")+'"':"";if(t="thumbnails"===n.vars.controlNav?'<img src="'+a.attr("data-thumb")+'"'+l+"/>":'<a href="#">'+o+"</a>","thumbnails"===n.vars.controlNav&&!0===n.vars.thumbCaptions){var u=a.attr("data-thumbcaption");""!==u&&void 0!==u&&(t+='<span class="'+r+'caption">'+u+"</span>")}n.controlNavScaffold.append("<li>"+t+"</li>"),o++}n.controlsContainer?e(n.controlsContainer).append(n.controlNavScaffold):n.append(n.controlNavScaffold),g.controlNav.set(),g.controlNav.active(),n.controlNavScaffold.delegate("a, img",c,function(t){if(t.preventDefault(),""===d||d===t.type){var a=e(this),i=n.controlNav.index(a);a.hasClass(r+"active")||(n.direction=i>n.currentSlide?"next":"prev",n.flexAnimate(i,n.vars.pauseOnAction))}""===d&&(d=t.type),g.setToClearWatchedEvent()})},setupManual:function(){n.controlNav=n.manualControls,g.controlNav.active(),n.controlNav.bind(c,function(t){if(t.preventDefault(),""===d||d===t.type){var a=e(this),i=n.controlNav.index(a);a.hasClass(r+"active")||(i>n.currentSlide?n.direction="next":n.direction="prev",n.flexAnimate(i,n.vars.pauseOnAction))}""===d&&(d=t.type),g.setToClearWatchedEvent()})},set:function(){var t="thumbnails"===n.vars.controlNav?"img":"a";n.controlNav=e("."+r+"control-nav li "+t,n.controlsContainer?n.controlsContainer:n)},active:function(){n.controlNav.removeClass(r+"active").eq(n.animatingTo).addClass(r+"active")},update:function(t,a){n.pagingCount>1&&"add"===t?n.controlNavScaffold.append(e('<li><a href="#">'+n.count+"</a></li>")):1===n.pagingCount?n.controlNavScaffold.find("li").remove():n.controlNav.eq(a).closest("li").remove(),g.controlNav.set(),n.pagingCount>1&&n.pagingCount!==n.controlNav.length?n.update(a,t):g.controlNav.active()}},directionNav:{setup:function(){var t=e('<ul class="'+r+'direction-nav"><li class="'+r+'nav-prev"><a class="'+r+'prev" href="#">'+n.vars.prevText+'</a></li><li class="'+r+'nav-next"><a class="'+r+'next" href="#">'+n.vars.nextText+"</a></li></ul>");n.customDirectionNav?n.directionNav=n.customDirectionNav:n.controlsContainer?(e(n.controlsContainer).append(t),n.directionNav=e("."+r+"direction-nav li a",n.controlsContainer)):(n.append(t),n.directionNav=e("."+r+"direction-nav li a",n)),g.directionNav.update(),n.directionNav.bind(c,function(t){t.preventDefault();var a;""!==d&&d!==t.type||(a=e(this).hasClass(r+"next")?n.getTarget("next"):n.getTarget("prev"),n.flexAnimate(a,n.vars.pauseOnAction)),""===d&&(d=t.type),g.setToClearWatchedEvent()})},update:function(){var e=r+"disabled";1===n.pagingCount?n.directionNav.addClass(e).attr("tabindex","-1"):n.vars.animationLoop?n.directionNav.removeClass(e).removeAttr("tabindex"):0===n.animatingTo?n.directionNav.removeClass(e).filter("."+r+"prev").addClass(e).attr("tabindex","-1"):n.animatingTo===n.last?n.directionNav.removeClass(e).filter("."+r+"next").addClass(e).attr("tabindex","-1"):n.directionNav.removeClass(e).removeAttr("tabindex")}},pausePlay:{setup:function(){var t=e('<div class="'+r+'pauseplay"><a href="#"></a></div>');n.controlsContainer?(n.controlsContainer.append(t),n.pausePlay=e("."+r+"pauseplay a",n.controlsContainer)):(n.append(t),n.pausePlay=e("."+r+"pauseplay a",n)),g.pausePlay.update(n.vars.slideshow?r+"pause":r+"play"),n.pausePlay.bind(c,function(t){t.preventDefault(),""!==d&&d!==t.type||(e(this).hasClass(r+"pause")?(n.manualPause=!0,n.manualPlay=!1,n.pause()):(n.manualPause=!1,n.manualPlay=!0,n.play())),""===d&&(d=t.type),g.setToClearWatchedEvent()})},update:function(e){"play"===e?n.pausePlay.removeClass(r+"pause").addClass(r+"play").html(n.vars.playText):n.pausePlay.removeClass(r+"play").addClass(r+"pause").html(n.vars.pauseText)}},touch:function(){var e,t,i,o,r,l,c,d,h,g=!1,v=0,w=0,b=0;s?(a.style.msTouchAction="none",a._gesture=new MSGesture,a._gesture.target=a,a.addEventListener("MSPointerDown",function(e){e.stopPropagation(),n.animating?e.preventDefault():(n.pause(),a._gesture.addPointer(e.pointerId),b=0,o=u?n.h:n.w,l=Number(new Date),i=m&&p&&n.animatingTo===n.last?0:m&&p?n.limit-(n.itemW+n.vars.itemMargin)*n.move*n.animatingTo:m&&n.currentSlide===n.last?n.limit:m?(n.itemW+n.vars.itemMargin)*n.move*n.currentSlide:p?(n.last-n.currentSlide+n.cloneOffset)*o:(n.currentSlide+n.cloneOffset)*o)},!1),a._slider=n,a.addEventListener("MSGestureChange",function(e){e.stopPropagation();var t=e.target._slider;if(t){var n=-e.translationX,s=-e.translationY;r=b+=u?s:n,g=u?Math.abs(b)<Math.abs(-n):Math.abs(b)<Math.abs(-s),e.detail!==e.MSGESTURE_FLAG_INERTIA?(!g||Number(new Date)-l>500)&&(e.preventDefault(),!f&&t.transitions&&(t.vars.animationLoop||(r=b/(0===t.currentSlide&&b<0||t.currentSlide===t.last&&b>0?Math.abs(b)/o+2:1)),t.setProps(i+r,"setTouch"))):setImmediate(function(){a._gesture.stop()})}},!1),a.addEventListener("MSGestureEnd",function(a){a.stopPropagation();var n=a.target._slider;if(n){if(n.animatingTo===n.currentSlide&&!g&&null!==r){var s=p?-r:r,c=s>0?n.getTarget("next"):n.getTarget("prev");n.canAdvance(c)&&(Number(new Date)-l<550&&Math.abs(s)>50||Math.abs(s)>o/2)?n.flexAnimate(c,n.vars.pauseOnAction):f||n.flexAnimate(n.currentSlide,n.vars.pauseOnAction,!0)}e=null,t=null,r=null,i=null,b=0}},!1)):(c=function(r){n.animating?r.preventDefault():(window.navigator.msPointerEnabled||1===r.touches.length)&&(n.pause(),o=u?n.h:n.w,l=Number(new Date),v=r.touches[0].pageX,w=r.touches[0].pageY,i=m&&p&&n.animatingTo===n.last?0:m&&p?n.limit-(n.itemW+n.vars.itemMargin)*n.move*n.animatingTo:m&&n.currentSlide===n.last?n.limit:m?(n.itemW+n.vars.itemMargin)*n.move*n.currentSlide:p?(n.last-n.currentSlide+n.cloneOffset)*o:(n.currentSlide+n.cloneOffset)*o,e=u?w:v,t=u?v:w,a.addEventListener("touchmove",d,!1),a.addEventListener("touchend",h,!1))},d=function(a){v=a.touches[0].pageX,w=a.touches[0].pageY,r=u?e-w:e-v;(!(g=u?Math.abs(r)<Math.abs(v-t):Math.abs(r)<Math.abs(w-t))||Number(new Date)-l>500)&&(a.preventDefault(),!f&&n.transitions&&(n.vars.animationLoop||(r/=0===n.currentSlide&&r<0||n.currentSlide===n.last&&r>0?Math.abs(r)/o+2:1),n.setProps(i+r,"setTouch")))},h=function(s){if(a.removeEventListener("touchmove",d,!1),n.animatingTo===n.currentSlide&&!g&&null!==r){var c=p?-r:r,u=c>0?n.getTarget("next"):n.getTarget("prev");n.canAdvance(u)&&(Number(new Date)-l<550&&Math.abs(c)>50||Math.abs(c)>o/2)?n.flexAnimate(u,n.vars.pauseOnAction):f||n.flexAnimate(n.currentSlide,n.vars.pauseOnAction,!0)}a.removeEventListener("touchend",h,!1),e=null,t=null,r=null,i=null},a.addEventListener("touchstart",c,!1))},resize:function(){!n.animating&&n.is(":visible")&&(m||n.doMath(),f?g.smoothHeight():m?(n.slides.width(n.computedW),n.update(n.pagingCount),n.setProps()):u?(n.viewport.height(n.h),n.setProps(n.h,"setTotal")):(n.vars.smoothHeight&&g.smoothHeight(),n.newSlides.width(n.computedW),n.setProps(n.computedW,"setTotal")))},smoothHeight:function(e){if(!u||f){var t=f?n:n.viewport;e?t.animate({height:n.slides.eq(n.animatingTo).innerHeight()},e):t.innerHeight(n.slides.eq(n.animatingTo).innerHeight())}},sync:function(t){var a=e(n.vars.sync).data("flexslider"),i=n.animatingTo;switch(t){case"animate":a.flexAnimate(i,n.vars.pauseOnAction,!1,!0);break;case"play":a.playing||a.asNav||a.play();break;case"pause":a.pause()}},uniqueID:function(t){return t.filter("[id]").add(t.find("[id]")).each(function(){var t=e(this);t.attr("id",t.attr("id")+"_clone")}),t},pauseInvisible:{visProp:null,init:function(){var e=g.pauseInvisible.getHiddenProp();if(e){var t=e.replace(/[H|h]idden/,"")+"visibilitychange";document.addEventListener(t,function(){g.pauseInvisible.isHidden()?n.startTimeout?clearTimeout(n.startTimeout):n.pause():n.started?n.play():n.vars.initDelay>0?setTimeout(n.play,n.vars.initDelay):n.play()})}},isHidden:function(){var e=g.pauseInvisible.getHiddenProp();return!!e&&document[e]},getHiddenProp:function(){var e=["webkit","moz","ms","o"];if("hidden"in document)return"hidden";for(var t=0;t<e.length;t++)if(e[t]+"Hidden"in document)return e[t]+"Hidden";return null}},setToClearWatchedEvent:function(){clearTimeout(o),o=setTimeout(function(){d=""},3e3)}},n.flexAnimate=function(t,a,i,o,s){if(n.vars.animationLoop||t===n.currentSlide||(n.direction=t>n.currentSlide?"next":"prev"),h&&1===n.pagingCount&&(n.direction=n.currentItem<t?"next":"prev"),!n.animating&&(n.canAdvance(t,s)||i)&&n.is(":visible")){if(h&&o){var c=e(n.vars.asNavFor).data("flexslider");if(n.atEnd=0===t||t===n.count-1,c.flexAnimate(t,!0,!1,!0,s),n.direction=n.currentItem<t?"next":"prev",c.direction=n.direction,Math.ceil((t+1)/n.visible)-1===n.currentSlide||0===t)return n.currentItem=t,n.slides.removeClass(r+"active-slide").eq(t).addClass(r+"active-slide"),!1;n.currentItem=t,n.slides.removeClass(r+"active-slide").eq(t).addClass(r+"active-slide"),t=Math.floor(t/n.visible)}if(n.animating=!0,n.animatingTo=t,a&&n.pause(),n.vars.before(n),n.syncExists&&!s&&g.sync("animate"),n.vars.controlNav&&g.controlNav.active(),m||n.slides.removeClass(r+"active-slide").eq(t).addClass(r+"active-slide"),n.atEnd=0===t||t===n.last,n.vars.directionNav&&g.directionNav.update(),t===n.last&&(n.vars.end(n),n.vars.animationLoop||n.pause()),f)l?(n.slides.eq(n.currentSlide).css({opacity:0,zIndex:1}),n.slides.eq(t).css({opacity:1,zIndex:2}),n.wrapup(b)):(n.slides.eq(n.currentSlide).css({zIndex:1}).animate({opacity:0},n.vars.animationSpeed,n.vars.easing),n.slides.eq(t).css({zIndex:2}).animate({opacity:1},n.vars.animationSpeed,n.vars.easing,n.wrapup));else{var d,v,w,b=u?n.slides.filter(":first").height():n.computedW;m?(d=n.vars.itemMargin,v=(w=(n.itemW+d)*n.move*n.animatingTo)>n.limit&&1!==n.visible?n.limit:w):v=0===n.currentSlide&&t===n.count-1&&n.vars.animationLoop&&"next"!==n.direction?p?(n.count+n.cloneOffset)*b:0:n.currentSlide===n.last&&0===t&&n.vars.animationLoop&&"prev"!==n.direction?p?0:(n.count+1)*b:p?(n.count-1-t+n.cloneOffset)*b:(t+n.cloneOffset)*b,n.setProps(v,"",n.vars.animationSpeed),n.transitions?(n.vars.animationLoop&&n.atEnd||(n.animating=!1,n.currentSlide=n.animatingTo),n.container.unbind("webkitTransitionEnd transitionend"),n.container.bind("webkitTransitionEnd transitionend",function(){clearTimeout(n.ensureAnimationEnd),n.wrapup(b)}),clearTimeout(n.ensureAnimationEnd),n.ensureAnimationEnd=setTimeout(function(){n.wrapup(b)},n.vars.animationSpeed+100)):n.container.animate(n.args,n.vars.animationSpeed,n.vars.easing,function(){n.wrapup(b)})}n.vars.smoothHeight&&g.smoothHeight(n.vars.animationSpeed)}},n.wrapup=function(e){f||m||(0===n.currentSlide&&n.animatingTo===n.last&&n.vars.animationLoop?n.setProps(e,"jumpEnd"):n.currentSlide===n.last&&0===n.animatingTo&&n.vars.animationLoop&&n.setProps(e,"jumpStart")),n.animating=!1,n.currentSlide=n.animatingTo,n.vars.after(n)},n.animateSlides=function(){!n.animating&&t&&n.flexAnimate(n.getTarget("next"))},n.pause=function(){clearInterval(n.animatedSlides),n.animatedSlides=null,n.playing=!1,n.vars.pausePlay&&g.pausePlay.update("play"),n.syncExists&&g.sync("pause")},n.play=function(){n.playing&&clearInterval(n.animatedSlides),n.animatedSlides=n.animatedSlides||setInterval(n.animateSlides,n.vars.slideshowSpeed),n.started=n.playing=!0,n.vars.pausePlay&&g.pausePlay.update("pause"),n.syncExists&&g.sync("play")},n.stop=function(){n.pause(),n.stopped=!0},n.canAdvance=function(e,t){var a=h?n.pagingCount-1:n.last;return!!t||(!(!h||n.currentItem!==n.count-1||0!==e||"prev"!==n.direction)||(!h||0!==n.currentItem||e!==n.pagingCount-1||"next"===n.direction)&&(!(e===n.currentSlide&&!h)&&(!!n.vars.animationLoop||(!n.atEnd||0!==n.currentSlide||e!==a||"next"===n.direction)&&(!n.atEnd||n.currentSlide!==a||0!==e||"next"!==n.direction))))},n.getTarget=function(e){return n.direction=e,"next"===e?n.currentSlide===n.last?0:n.currentSlide+1:0===n.currentSlide?n.last:n.currentSlide-1},n.setProps=function(e,t,a){var i=function(){var a=e||(n.itemW+n.vars.itemMargin)*n.move*n.animatingTo;return-1*function(){if(m)return"setTouch"===t?e:p&&n.animatingTo===n.last?0:p?n.limit-(n.itemW+n.vars.itemMargin)*n.move*n.animatingTo:n.animatingTo===n.last?n.limit:a;switch(t){case"setTotal":return p?(n.count-1-n.currentSlide+n.cloneOffset)*e:(n.currentSlide+n.cloneOffset)*e;case"setTouch":return e;case"jumpEnd":return p?e:n.count*e;case"jumpStart":return p?n.count*e:e;default:return e}}()+"px"}();n.transitions&&(i=u?"translate3d(0,"+i+",0)":"translate3d("+i+",0,0)",a=void 0!==a?a/1e3+"s":"0s",n.container.css("-"+n.pfx+"-transition-duration",a),n.container.css("transition-duration",a)),n.args[n.prop]=i,(n.transitions||void 0===a)&&n.container.css(n.args),n.container.css("transform",i)},n.setup=function(t){if(f)n.slides.css({width:"100%",float:"left",marginRight:"-100%",position:"relative"}),"init"===t&&(l?n.slides.css({opacity:0,display:"block",webkitTransition:"opacity "+n.vars.animationSpeed/1e3+"s ease",zIndex:1}).eq(n.currentSlide).css({opacity:1,zIndex:2}):0==n.vars.fadeFirstSlide?n.slides.css({opacity:0,display:"block",zIndex:1}).eq(n.currentSlide).css({zIndex:2}).css({opacity:1}):n.slides.css({opacity:0,display:"block",zIndex:1}).eq(n.currentSlide).css({zIndex:2}).animate({opacity:1},n.vars.animationSpeed,n.vars.easing)),n.vars.smoothHeight&&g.smoothHeight();else{var a,i;"init"===t&&(n.viewport=e('<div class="'+r+'viewport"></div>').css({overflow:"hidden",position:"relative"}).appendTo(n).append(n.container),n.cloneCount=0,n.cloneOffset=0,p&&(i=e.makeArray(n.slides).reverse(),n.slides=e(i),n.container.empty().append(n.slides))),n.vars.animationLoop&&!m&&(n.cloneCount=2,n.cloneOffset=1,"init"!==t&&n.container.find(".clone").remove(),n.container.append(g.uniqueID(n.slides.first().clone().addClass("clone")).attr("aria-hidden","true")).prepend(g.uniqueID(n.slides.last().clone().addClass("clone")).attr("aria-hidden","true"))),n.newSlides=e(n.vars.selector,n),a=p?n.count-1-n.currentSlide+n.cloneOffset:n.currentSlide+n.cloneOffset,u&&!m?(n.container.height(200*(n.count+n.cloneCount)+"%").css("position","absolute").width("100%"),setTimeout(function(){n.newSlides.css({display:"block"}),n.doMath(),n.viewport.height(n.h),n.setProps(a*n.h,"init")},"init"===t?100:0)):(n.container.width(200*(n.count+n.cloneCount)+"%"),n.setProps(a*n.computedW,"init"),setTimeout(function(){n.doMath(),n.newSlides.css({width:n.computedW,marginRight:n.computedM,float:"left",display:"block"}),n.vars.smoothHeight&&g.smoothHeight()},"init"===t?100:0))}m||n.slides.removeClass(r+"active-slide").eq(n.currentSlide).addClass(r+"active-slide"),n.vars.init(n)},n.doMath=function(){var e=n.slides.first(),t=n.vars.itemMargin,a=n.vars.minItems,i=n.vars.maxItems;n.w=void 0===n.viewport?n.width():n.viewport.width(),n.h=e.height(),n.boxPadding=e.outerWidth()-e.width(),m?(n.itemT=n.vars.itemWidth+t,n.itemM=t,n.minW=a?a*n.itemT:n.w,n.maxW=i?i*n.itemT-t:n.w,n.itemW=n.minW>n.w?(n.w-t*(a-1))/a:n.maxW<n.w?(n.w-t*(i-1))/i:n.vars.itemWidth>n.w?n.w:n.vars.itemWidth,n.visible=Math.floor(n.w/n.itemW),n.move=n.vars.move>0&&n.vars.move<n.visible?n.vars.move:n.visible,n.pagingCount=Math.ceil((n.count-n.visible)/n.move+1),n.last=n.pagingCount-1,n.limit=1===n.pagingCount?0:n.vars.itemWidth>n.w?n.itemW*(n.count-1)+t*(n.count-1):(n.itemW+t)*n.count-n.w-t):(n.itemW=n.w,n.itemM=t,n.pagingCount=n.count,n.last=n.count-1),n.computedW=n.itemW-n.boxPadding,n.computedM=n.itemM},n.update=function(e,t){n.doMath(),m||(e<n.currentSlide?n.currentSlide+=1:e<=n.currentSlide&&0!==e&&(n.currentSlide-=1),n.animatingTo=n.currentSlide),n.vars.controlNav&&!n.manualControls&&("add"===t&&!m||n.pagingCount>n.controlNav.length?g.controlNav.update("add"):("remove"===t&&!m||n.pagingCount<n.controlNav.length)&&(m&&n.currentSlide>n.last&&(n.currentSlide-=1,n.animatingTo-=1),g.controlNav.update("remove",n.last))),n.vars.directionNav&&g.directionNav.update()},n.addSlide=function(t,a){var i=e(t);n.count+=1,n.last=n.count-1,u&&p?void 0!==a?n.slides.eq(n.count-a).after(i):n.container.prepend(i):void 0!==a?n.slides.eq(a).before(i):n.container.append(i),n.update(a,"add"),n.slides=e(n.vars.selector+":not(.clone)",n),n.setup(),n.vars.added(n)},n.removeSlide=function(t){var a=isNaN(t)?n.slides.index(e(t)):t;n.count-=1,n.last=n.count-1,isNaN(t)?e(t,n.slides).remove():u&&p?n.slides.eq(n.last).remove():n.slides.eq(t).remove(),n.doMath(),n.update(a,"remove"),n.slides=e(n.vars.selector+":not(.clone)",n),n.setup(),n.vars.removed(n)},g.init()},e(window).blur(function(e){t=!1}).focus(function(e){t=!0}),e.flexslider.defaults={namespace:"flex-",selector:".slides > li",animation:"fade",easing:"swing",direction:"horizontal",reverse:!1,animationLoop:!0,smoothHeight:!1,startAt:0,slideshow:!0,slideshowSpeed:7e3,animationSpeed:600,initDelay:0,randomize:!1,fadeFirstSlide:!0,thumbCaptions:!1,pauseOnAction:!0,pauseOnHover:!1,pauseInvisible:!0,useCSS:!0,touch:!0,video:!1,controlNav:!0,directionNav:!0,prevText:"Previous",nextText:"Next",keyboard:!0,multipleKeyboard:!1,mousewheel:!1,pausePlay:!1,pauseText:"Pause",playText:"Play",controlsContainer:"",manualControls:"",customDirectionNav:"",sync:"",asNavFor:"",itemWidth:0,itemMargin:0,minItems:1,maxItems:0,move:0,allowOneSlide:!0,start:function(){},before:function(){},after:function(){},end:function(){},added:function(){},removed:function(){},init:function(){}},e.fn.flexslider=function(t){if(void 0===t&&(t={}),"object"==typeof t)return this.each(function(){var a=e(this),i=t.selector?t.selector:".slides > li",n=a.find(i);1===n.length&&!1===t.allowOneSlide||0===n.length?(n.fadeIn(400),t.start&&t.start(a)):void 0===a.data("flexslider")&&new e.flexslider(this,t)});var a=e(this).data("flexslider");switch(t){case"play":a.play();break;case"pause":a.pause();break;case"stop":a.stop();break;case"next":a.flexAnimate(a.getTarget("next"),!0);break;case"prev":case"previous":a.flexAnimate(a.getTarget("prev"),!0);break;default:"number"==typeof t&&a.flexAnimate(t,!0)}}}(jQuery),function(e){function t(t,a){function i(){var e=w.toLowerCase();h.obj.css(v,b/m.ratio),p.obj.css(v,-b),_.start=h.obj.offset()[v],m.obj.css(e,f[a.axis]),f.obj.css(e,f[a.axis]),h.obj.css(e,h[a.axis])}function n(){x?(e(u.obj[0]).bind("touchstart",function(e){1===e.originalEvent.touches.length&&(o(e.originalEvent.touches[0]),e.originalEvent.stopPropagation())}),e(".primary").bind("touchstart",function(e){})):(h.obj.bind("mousedown",o),f.obj.bind("mouseup",s)),a.scroll&&window.addEventListener?(d[0].addEventListener("DOMMouseScroll",r,!1),d[0].addEventListener("mousewheel",r,!1),d[0].addEventListener("MozMousePixelScroll",function(e){e.preventDefault()},!1)):a.scroll&&(d[0].onmousewheel=r)}function o(t){e("body").addClass("noSelect");var a=parseInt(h.obj.css(v),10);_.start=g?t.pageX:t.pageY,y.start="auto"==a?0:a,x?(document.ontouchmove=function(e){e.preventDefault(),s(e.touches[0])},document.ontouchend=l):(e(document).bind("mousemove",s),e(document).bind("mouseup",l),h.obj.bind("mouseup",l))}function r(t){if(p.ratio<1){var i=t||window.event,n=i.wheelDelta?i.wheelDelta/120:-i.detail/3;b-=n*a.wheel,b=Math.min(p[a.axis]-u[a.axis],Math.max(0,b)),h.obj.css(v,b/m.ratio),p.obj.css(v,-b),(a.lockscroll||b!==p[a.axis]-u[a.axis]&&0!==b)&&(i=e.event.fix(i)).preventDefault()}}function s(e){p.ratio<1&&(a.invertscroll&&x?y.now=Math.min(f[a.axis]-h[a.axis],Math.max(0,y.start+(_.start-(g?e.pageX:e.pageY)))):y.now=Math.min(f[a.axis]-h[a.axis],Math.max(0,y.start+((g?e.pageX:e.pageY)-_.start))),b=y.now*m.ratio,p.obj.css(v,-b),h.obj.css(v,y.now))}function l(){e("body").removeClass("noSelect"),e(document).unbind("mousemove",s),e(document).unbind("mouseup",l),h.obj.unbind("mouseup",l),document.ontouchmove=document.ontouchend=null}var c=this,d=t,u={obj:e(".viewport",t)},p={obj:e(".overview",t)},m={obj:e(".scrollbar",t)},f={obj:e(".track",m.obj)},h={obj:e(".thumb",m.obj)},g="x"===a.axis,v=g?"left":"top",w=g?"Width":"Height",b=0,y={start:0,now:0},_={},x="ontouchstart"in document.documentElement;return this.update=function(e){u[a.axis]=u.obj[0]["offset"+w],p[a.axis]=p.obj[0]["scroll"+w],p.ratio=u[a.axis]/p[a.axis],m.obj.toggleClass("disable",p.ratio>=1),f[a.axis]="auto"===a.size?u[a.axis]:a.size,h[a.axis]=Math.min(f[a.axis],Math.max(0,"auto"===a.sizethumb?f[a.axis]*p.ratio:a.sizethumb)),m.ratio="auto"===a.sizethumb?p[a.axis]/f[a.axis]:(p[a.axis]-u[a.axis])/(f[a.axis]-h[a.axis]),b="relative"===e&&p.ratio<=1?Math.min(p[a.axis]-u[a.axis],Math.max(0,b)):0,b="bottom"===e&&p.ratio<=1?p[a.axis]-u[a.axis]:isNaN(parseInt(e,10))?b:parseInt(e,10),i()},c.update(),n(),c}e.tiny=e.tiny||{},e.tiny.scrollbar={options:{axis:"y",wheel:40,scroll:!0,lockscroll:!0,size:"auto",sizethumb:"auto",invertscroll:!1}},e.fn.tinyscrollbar=function(a){var i=e.extend({},e.tiny.scrollbar.options,a);return this.each(function(){e(this).data("tsb",new t(e(this),i))}),this},e.fn.tinyscrollbar_update=function(t){return e(this).data("tsb").update(t)}}(jQuery),function(e){"function"==typeof define&&define.amd?define(["jquery"],e):e("object"==typeof exports?require("jquery"):window.jQuery||window.Zepto)}(function(e){var t,a,i,n,o,r,s="Close",l="BeforeClose",c="MarkupParse",d="Open",u="Change",p="mfp",m="."+p,f="mfp-ready",h="mfp-removing",g="mfp-prevent-close",v=function(){},w=!!window.jQuery,b=e(window),y=function(e,a){t.ev.on(p+e+m,a)},_=function(t,a,i,n){var o=document.createElement("div");return o.className="mfp-"+t,i&&(o.innerHTML=i),n?a&&a.appendChild(o):(o=e(o),a&&o.appendTo(a)),o},x=function(a,i){t.ev.triggerHandler(p+a,i),t.st.callbacks&&(a=a.charAt(0).toLowerCase()+a.slice(1),t.st.callbacks[a]&&t.st.callbacks[a].apply(t,e.isArray(i)?i:[i]))},j=function(a){return a===r&&t.currTemplate.closeBtn||(t.currTemplate.closeBtn=e(t.st.closeMarkup.replace("%title%",t.st.tClose)),r=a),t.currTemplate.closeBtn},C=function(){e.magnificPopup.instance||((t=new v).init(),e.magnificPopup.instance=t)},k=function(){var e=document.createElement("p").style,t=["ms","O","Moz","Webkit"];if(void 0!==e.transition)return!0;for(;t.length;)if(t.pop()+"Transition"in e)return!0;return!1};v.prototype={constructor:v,init:function(){var a=navigator.appVersion;t.isLowIE=t.isIE8=document.all&&!document.addEventListener,t.isAndroid=/android/gi.test(a),t.isIOS=/iphone|ipad|ipod/gi.test(a),t.supportsTransition=k(),t.probablyMobile=t.isAndroid||t.isIOS||/(Opera Mini)|Kindle|webOS|BlackBerry|(Opera Mobi)|(Windows Phone)|IEMobile/i.test(navigator.userAgent),i=e(document),t.popupsCache={}},open:function(a){var n;if(!1===a.isObj){t.items=a.items.toArray(),t.index=0;var r,s=a.items;for(n=0;n<s.length;n++)if((r=s[n]).parsed&&(r=r.el[0]),r===a.el[0]){t.index=n;break}}else t.items=e.isArray(a.items)?a.items:[a.items],t.index=a.index||0;{if(!t.isOpen){t.types=[],o="",a.mainEl&&a.mainEl.length?t.ev=a.mainEl.eq(0):t.ev=i,a.key?(t.popupsCache[a.key]||(t.popupsCache[a.key]={}),t.currTemplate=t.popupsCache[a.key]):t.currTemplate={},t.st=e.extend(!0,{},e.magnificPopup.defaults,a),t.fixedContentPos="auto"===t.st.fixedContentPos?!t.probablyMobile:t.st.fixedContentPos,t.st.modal&&(t.st.closeOnContentClick=!1,t.st.closeOnBgClick=!1,t.st.showCloseBtn=!1,t.st.enableEscapeKey=!1),t.bgOverlay||(t.bgOverlay=_("bg").on("click"+m,function(){t.close()}),t.wrap=_("wrap").attr("tabindex",-1).on("click"+m,function(e){t._checkIfClose(e.target)&&t.close()}),t.container=_("container",t.wrap)),t.contentContainer=_("content"),t.st.preloader&&(t.preloader=_("preloader",t.container,t.st.tLoading));var l=e.magnificPopup.modules;for(n=0;n<l.length;n++){var u=l[n];u=u.charAt(0).toUpperCase()+u.slice(1),t["init"+u].call(t)}x("BeforeOpen"),t.st.showCloseBtn&&(t.st.closeBtnInside?(y(c,function(e,t,a,i){a.close_replaceWith=j(i.type)}),o+=" mfp-close-btn-in"):t.wrap.append(j())),t.st.alignTop&&(o+=" mfp-align-top"),t.fixedContentPos?t.wrap.css({overflow:t.st.overflowY,overflowX:"hidden",overflowY:t.st.overflowY}):t.wrap.css({top:b.scrollTop(),position:"absolute"}),(!1===t.st.fixedBgPos||"auto"===t.st.fixedBgPos&&!t.fixedContentPos)&&t.bgOverlay.css({height:i.height(),position:"absolute"}),t.st.enableEscapeKey&&i.on("keyup"+m,function(e){27===e.keyCode&&t.close()}),b.on("resize"+m,function(){t.updateSize()}),t.st.closeOnContentClick||(o+=" mfp-auto-cursor"),o&&t.wrap.addClass(o);var p=t.wH=b.height(),h={};if(t.fixedContentPos&&t._hasScrollBar(p)){var g=t._getScrollbarSize();g&&(h.marginRight=g)}t.fixedContentPos&&(t.isIE7?e("body, html").css("overflow","hidden"):h.overflow="hidden");var v=t.st.mainClass;return t.isIE7&&(v+=" mfp-ie7"),v&&t._addClassToMFP(v),t.updateItemHTML(),x("BuildControls"),e("html").css(h),t.bgOverlay.add(t.wrap).prependTo(t.st.prependTo||e(document.body)),t._lastFocusedEl=document.activeElement,setTimeout(function(){t.content?(t._addClassToMFP(f),t._setFocus()):t.bgOverlay.addClass(f),i.on("focusin"+m,t._onFocusIn)},16),t.isOpen=!0,t.updateSize(p),x(d),a}t.updateItemHTML()}},close:function(){t.isOpen&&(x(l),t.isOpen=!1,t.st.removalDelay&&!t.isLowIE&&t.supportsTransition?(t._addClassToMFP(h),setTimeout(function(){t._close()},t.st.removalDelay)):t._close())},_close:function(){x(s);var a=h+" "+f+" ";if(t.bgOverlay.detach(),t.wrap.detach(),t.container.empty(),t.st.mainClass&&(a+=t.st.mainClass+" "),t._removeClassFromMFP(a),t.fixedContentPos){var n={marginRight:""};t.isIE7?e("body, html").css("overflow",""):n.overflow="",e("html").css(n)}i.off("keyup.mfp focusin"+m),t.ev.off(m),t.wrap.attr("class","mfp-wrap").removeAttr("style"),t.bgOverlay.attr("class","mfp-bg"),t.container.attr("class","mfp-container"),!t.st.showCloseBtn||t.st.closeBtnInside&&!0!==t.currTemplate[t.currItem.type]||t.currTemplate.closeBtn&&t.currTemplate.closeBtn.detach(),t.st.autoFocusLast&&t._lastFocusedEl&&e(t._lastFocusedEl).focus(),t.currItem=null,t.content=null,t.currTemplate=null,t.prevHeight=0,x("AfterClose")},updateSize:function(e){if(t.isIOS){var a=document.documentElement.clientWidth/window.innerWidth,i=window.innerHeight*a;t.wrap.css("height",i),t.wH=i}else t.wH=e||b.height();t.fixedContentPos||t.wrap.css("height",t.wH),x("Resize")},updateItemHTML:function(){var a=t.items[t.index];t.contentContainer.detach(),t.content&&t.content.detach(),a.parsed||(a=t.parseEl(t.index));var i=a.type;if(x("BeforeChange",[t.currItem?t.currItem.type:"",i]),t.currItem=a,!t.currTemplate[i]){var o=!!t.st[i]&&t.st[i].markup;x("FirstMarkupParse",o),t.currTemplate[i]=!o||e(o)}n&&n!==a.type&&t.container.removeClass("mfp-"+n+"-holder");var r=t["get"+i.charAt(0).toUpperCase()+i.slice(1)](a,t.currTemplate[i]);t.appendContent(r,i),a.preloaded=!0,x(u,a),n=a.type,t.container.prepend(t.contentContainer),x("AfterChange")},appendContent:function(e,a){t.content=e,e?t.st.showCloseBtn&&t.st.closeBtnInside&&!0===t.currTemplate[a]?t.content.find(".mfp-close").length||t.content.append(j()):t.content=e:t.content="",x("BeforeAppend"),t.container.addClass("mfp-"+a+"-holder"),t.contentContainer.append(t.content)},parseEl:function(a){var i,n=t.items[a];if(n.tagName?n={el:e(n)}:(i=n.type,n={data:n,src:n.src}),n.el){for(var o=t.types,r=0;r<o.length;r++)if(n.el.hasClass("mfp-"+o[r])){i=o[r];break}n.src=n.el.attr("data-mfp-src"),n.src||(n.src=n.el.attr("href"))}return n.type=i||t.st.type||"inline",n.index=a,n.parsed=!0,t.items[a]=n,x("ElementParse",n),t.items[a]},addGroup:function(e,a){var i=function(i){i.mfpEl=this,t._openClick(i,e,a)};a||(a={});var n="click.magnificPopup";a.mainEl=e,a.items?(a.isObj=!0,e.off(n).on(n,i)):(a.isObj=!1,a.delegate?e.off(n).on(n,a.delegate,i):(a.items=e,e.off(n).on(n,i)))},_openClick:function(a,i,n){if((void 0!==n.midClick?n.midClick:e.magnificPopup.defaults.midClick)||!(2===a.which||a.ctrlKey||a.metaKey||a.altKey||a.shiftKey)){var o=void 0!==n.disableOn?n.disableOn:e.magnificPopup.defaults.disableOn;if(o)if(e.isFunction(o)){if(!o.call(t))return!0}else if(b.width()<o)return!0;a.type&&(a.preventDefault(),t.isOpen&&a.stopPropagation()),n.el=e(a.mfpEl),n.delegate&&(n.items=i.find(n.delegate)),t.open(n)}},updateStatus:function(e,i){if(t.preloader){a!==e&&t.container.removeClass("mfp-s-"+a),i||"loading"!==e||(i=t.st.tLoading);var n={status:e,text:i};x("UpdateStatus",n),e=n.status,i=n.text,t.preloader.html(i),t.preloader.find("a").on("click",function(e){e.stopImmediatePropagation()}),t.container.addClass("mfp-s-"+e),a=e}},_checkIfClose:function(a){if(!e(a).hasClass(g)){var i=t.st.closeOnContentClick,n=t.st.closeOnBgClick;if(i&&n)return!0;if(!t.content||e(a).hasClass("mfp-close")||t.preloader&&a===t.preloader[0])return!0;if(a===t.content[0]||e.contains(t.content[0],a)){if(i)return!0}else if(n&&e.contains(document,a))return!0;return!1}},_addClassToMFP:function(e){t.bgOverlay.addClass(e),t.wrap.addClass(e)},_removeClassFromMFP:function(e){this.bgOverlay.removeClass(e),t.wrap.removeClass(e)},_hasScrollBar:function(e){return(t.isIE7?i.height():document.body.scrollHeight)>(e||b.height())},_setFocus:function(){(t.st.focus?t.content.find(t.st.focus).eq(0):t.wrap).focus()},_onFocusIn:function(a){return a.target===t.wrap[0]||e.contains(t.wrap[0],a.target)?void 0:(t._setFocus(),!1)},_parseMarkup:function(t,a,i){var n;i.data&&(a=e.extend(i.data,a)),x(c,[t,a,i]),e.each(a,function(a,i){if(void 0===i||!1===i)return!0;if((n=a.split("_")).length>1){var o=t.find(m+"-"+n[0]);if(o.length>0){var r=n[1];"replaceWith"===r?o[0]!==i[0]&&o.replaceWith(i):"img"===r?o.is("img")?o.attr("src",i):o.replaceWith(e("<img>").attr("src",i).attr("class",o.attr("class"))):o.attr(n[1],i)}}else t.find(m+"-"+a).html(i)})},_getScrollbarSize:function(){if(void 0===t.scrollbarSize){var e=document.createElement("div");e.style.cssText="width: 99px; height: 99px; overflow: scroll; position: absolute; top: -9999px;",document.body.appendChild(e),t.scrollbarSize=e.offsetWidth-e.clientWidth,document.body.removeChild(e)}return t.scrollbarSize}},e.magnificPopup={instance:null,proto:v.prototype,modules:[],open:function(t,a){return C(),t=t?e.extend(!0,{},t):{},t.isObj=!0,t.index=a||0,this.instance.open(t)},close:function(){return e.magnificPopup.instance&&e.magnificPopup.instance.close()},registerModule:function(t,a){a.options&&(e.magnificPopup.defaults[t]=a.options),e.extend(this.proto,a.proto),this.modules.push(t)},defaults:{disableOn:0,key:null,midClick:!1,mainClass:"",preloader:!0,focus:"",closeOnContentClick:!1,closeOnBgClick:!0,closeBtnInside:!0,showCloseBtn:!0,enableEscapeKey:!0,modal:!1,alignTop:!1,removalDelay:0,prependTo:null,fixedContentPos:"auto",fixedBgPos:"auto",overflowY:"auto",closeMarkup:'<button title="%title%" type="button" class="mfp-close">&#215;</button>',tClose:"Close (Esc)",tLoading:"Loading...",autoFocusLast:!0}},e.fn.magnificPopup=function(a){C();var i=e(this);if("string"==typeof a)if("open"===a){var n,o=w?i.data("magnificPopup"):i[0].magnificPopup,r=parseInt(arguments[1],10)||0;o.items?n=o.items[r]:(n=i,o.delegate&&(n=n.find(o.delegate)),n=n.eq(r)),t._openClick({mfpEl:n},i,o)}else t.isOpen&&t[a].apply(t,Array.prototype.slice.call(arguments,1));else a=e.extend(!0,{},a),w?i.data("magnificPopup",a):i[0].magnificPopup=a,t.addGroup(i,a);return i};var S,I,T,M="inline",P=function(){T&&(I.after(T.addClass(S)).detach(),T=null)};e.magnificPopup.registerModule(M,{options:{hiddenClass:"hide",markup:"",tNotFound:"Content not found"},proto:{initInline:function(){t.types.push(M),y(s+"."+M,function(){P()})},getInline:function(a,i){if(P(),a.src){var n=t.st.inline,o=e(a.src);if(o.length){var r=o[0].parentNode;r&&r.tagName&&(I||(S=n.hiddenClass,I=_(S),S="mfp-"+S),T=o.after(I).detach().removeClass(S)),t.updateStatus("ready")}else t.updateStatus("error",n.tNotFound),o=e("<div>");return a.inlineElement=o,o}return t.updateStatus("ready"),t._parseMarkup(i,{},a),i}}});var z,A="ajax",E=function(){z&&e(document.body).removeClass(z)},N=function(){E(),t.req&&t.req.abort()};e.magnificPopup.registerModule(A,{options:{settings:null,cursor:"mfp-ajax-cur",tError:'<a href="%url%">The content</a> could not be loaded.'},proto:{initAjax:function(){t.types.push(A),z=t.st.ajax.cursor,y(s+"."+A,N),y("BeforeChange."+A,N)},getAjax:function(a){z&&e(document.body).addClass(z),t.updateStatus("loading");var i=e.extend({url:a.src,success:function(i,n,o){var r={data:i,xhr:o};x("ParseAjax",r),t.appendContent(e(r.data),A),a.finished=!0,E(),t._setFocus(),setTimeout(function(){t.wrap.addClass(f)},16),t.updateStatus("ready"),x("AjaxContentAdded")},error:function(){E(),a.finished=a.loadError=!0,t.updateStatus("error",t.st.ajax.tError.replace("%url%",a.src))}},t.st.ajax.settings);return t.req=e.ajax(i),""}}});var L,O=function(a){if(a.data&&void 0!==a.data.title)return a.data.title;var i=t.st.image.titleSrc;if(i){if(e.isFunction(i))return i.call(t,a);if(a.el)return a.el.attr(i)||""}return""};e.magnificPopup.registerModule("image",{options:{markup:'<div class="mfp-figure"><div class="mfp-close"></div><figure><div class="mfp-img"></div><figcaption><div class="mfp-bottom-bar"><div class="mfp-title"></div><div class="mfp-counter"></div></div></figcaption></figure></div>',cursor:"mfp-zoom-out-cur",titleSrc:"title",verticalFit:!0,tError:'<a href="%url%">The image</a> could not be loaded.'},proto:{initImage:function(){var a=t.st.image,i=".image";t.types.push("image"),y(d+i,function(){"image"===t.currItem.type&&a.cursor&&e(document.body).addClass(a.cursor)}),y(s+i,function(){a.cursor&&e(document.body).removeClass(a.cursor),b.off("resize"+m)}),y("Resize"+i,t.resizeImage),t.isLowIE&&y("AfterChange",t.resizeImage)},resizeImage:function(){var e=t.currItem;if(e&&e.img&&t.st.image.verticalFit){var a=0;t.isLowIE&&(a=parseInt(e.img.css("padding-top"),10)+parseInt(e.img.css("padding-bottom"),10)),e.img.css("max-height",t.wH-a)}},_onImageHasSize:function(e){e.img&&(e.hasSize=!0,L&&clearInterval(L),e.isCheckingImgSize=!1,x("ImageHasSize",e),e.imgHidden&&(t.content&&t.content.removeClass("mfp-loading"),e.imgHidden=!1))},findImageSize:function(e){var a=0,i=e.img[0],n=function(o){L&&clearInterval(L),L=setInterval(function(){return i.naturalWidth>0?void t._onImageHasSize(e):(a>200&&clearInterval(L),void(3===++a?n(10):40===a?n(50):100===a&&n(500)))},o)};n(1)},getImage:function(a,i){var n=0,o=function(){a&&(a.img[0].complete?(a.img.off(".mfploader"),a===t.currItem&&(t._onImageHasSize(a),t.updateStatus("ready")),a.hasSize=!0,a.loaded=!0,x("ImageLoadComplete")):200>++n?setTimeout(o,100):r())},r=function(){a&&(a.img.off(".mfploader"),a===t.currItem&&(t._onImageHasSize(a),t.updateStatus("error",s.tError.replace("%url%",a.src))),a.hasSize=!0,a.loaded=!0,a.loadError=!0)},s=t.st.image,l=i.find(".mfp-img");if(l.length){var c=document.createElement("img");c.className="mfp-img",a.el&&a.el.find("img").length&&(c.alt=a.el.find("img").attr("alt")),a.img=e(c).on("load.mfploader",o).on("error.mfploader",r),c.src=a.src,l.is("img")&&(a.img=a.img.clone()),(c=a.img[0]).naturalWidth>0?a.hasSize=!0:c.width||(a.hasSize=!1)}return t._parseMarkup(i,{title:O(a),img_replaceWith:a.img},a),t.resizeImage(),a.hasSize?(L&&clearInterval(L),a.loadError?(i.addClass("mfp-loading"),t.updateStatus("error",s.tError.replace("%url%",a.src))):(i.removeClass("mfp-loading"),t.updateStatus("ready")),i):(t.updateStatus("loading"),a.loading=!0,a.hasSize||(a.imgHidden=!0,i.addClass("mfp-loading"),t.findImageSize(a)),i)}}});var D,Q=function(){return void 0===D&&(D=void 0!==document.createElement("p").style.MozTransform),D};e.magnificPopup.registerModule("zoom",{options:{enabled:!1,easing:"ease-in-out",duration:300,opener:function(e){return e.is("img")?e:e.find("img")}},proto:{initZoom:function(){var e,a=t.st.zoom,i=".zoom";if(a.enabled&&t.supportsTransition){var n,o,r=a.duration,c=function(e){var t=e.clone().removeAttr("style").removeAttr("class").addClass("mfp-animated-image"),i="all "+a.duration/1e3+"s "+a.easing,n={position:"fixed",zIndex:9999,left:0,top:0,"-webkit-backface-visibility":"hidden"},o="transition";return n["-webkit-"+o]=n["-moz-"+o]=n["-o-"+o]=n[o]=i,t.css(n),t},d=function(){t.content.css("visibility","visible")};y("BuildControls"+i,function(){if(t._allowZoom()){if(clearTimeout(n),t.content.css("visibility","hidden"),!(e=t._getItemToZoom()))return void d();(o=c(e)).css(t._getOffset()),t.wrap.append(o),n=setTimeout(function(){o.css(t._getOffset(!0)),n=setTimeout(function(){d(),setTimeout(function(){o.remove(),e=o=null,x("ZoomAnimationEnded")},16)},r)},16)}}),y(l+i,function(){if(t._allowZoom()){if(clearTimeout(n),t.st.removalDelay=r,!e){if(!(e=t._getItemToZoom()))return;o=c(e)}o.css(t._getOffset(!0)),t.wrap.append(o),t.content.css("visibility","hidden"),setTimeout(function(){o.css(t._getOffset())},16)}}),y(s+i,function(){t._allowZoom()&&(d(),o&&o.remove(),e=null)})}},_allowZoom:function(){return"image"===t.currItem.type},_getItemToZoom:function(){return!!t.currItem.hasSize&&t.currItem.img},_getOffset:function(a){var i,n=(i=a?t.currItem.img:t.st.zoom.opener(t.currItem.el||t.currItem)).offset(),o=parseInt(i.css("padding-top"),10),r=parseInt(i.css("padding-bottom"),10);n.top-=e(window).scrollTop()-o;var s={width:i.width(),height:(w?i.innerHeight():i[0].offsetHeight)-r-o};return Q()?s["-moz-transform"]=s.transform="translate("+n.left+"px,"+n.top+"px)":(s.left=n.left,s.top=n.top),s}}});var W="iframe",H=function(e){if(t.currTemplate[W]){var a=t.currTemplate[W].find("iframe");a.length&&(e||(a[0].src="//web.archive.org/web/20180107091706/https://about:blank"),t.isIE8&&a.css("display",e?"block":"none"))}};e.magnificPopup.registerModule(W,{options:{markup:'<div class="mfp-iframe-scaler"><div class="mfp-close"></div><iframe class="mfp-iframe" src="//web.archive.org/web/20180107091706/https://about:blank" frameborder="0" allowfullscreen></iframe></div>',srcAction:"iframe_src",patterns:{youtube:{index:"youtube.com",id:"v=",src:"//web.archive.org/web/20180107091706/https://www.youtube.com/embed/%id%?autoplay=1"},vimeo:{index:"vimeo.com/",id:"/",src:"//web.archive.org/web/20180107091706/https://player.vimeo.com/video/%id%?autoplay=1"},gmaps:{index:"//web.archive.org/web/20180107091706/https://maps.google./",src:"%id%&output=embed"}}},proto:{initIframe:function(){t.types.push(W),y("BeforeChange",function(e,t,a){t!==a&&(t===W?H():a===W&&H(!0))}),y(s+"."+W,function(){H()})},getIframe:function(a,i){var n=a.src,o=t.st.iframe;e.each(o.patterns,function(){return n.indexOf(this.index)>-1?(this.id&&(n="string"==typeof this.id?n.substr(n.lastIndexOf(this.id)+this.id.length,n.length):this.id.call(this,n)),n=this.src.replace("%id%",n),!1):void 0});var r={};return o.srcAction&&(r[o.srcAction]=n),t._parseMarkup(i,r,a),t.updateStatus("ready"),i}}});var F=function(e){var a=t.items.length;return e>a-1?e-a:0>e?a+e:e},B=function(e,t,a){return e.replace(/%curr%/gi,t+1).replace(/%total%/gi,a)};e.magnificPopup.registerModule("gallery",{options:{enabled:!1,arrowMarkup:'<button title="%title%" type="button" class="mfp-arrow mfp-arrow-%dir%"></button>',preload:[0,2],navigateByImgClick:!0,arrows:!0,tPrev:"Previous (Left arrow key)",tNext:"Next (Right arrow key)",tCounter:"%curr% of %total%"},proto:{initGallery:function(){var a=t.st.gallery,n=".mfp-gallery";return t.direction=!0,!(!a||!a.enabled)&&(o+=" mfp-gallery",y(d+n,function(){a.navigateByImgClick&&t.wrap.on("click"+n,".mfp-img",function(){return t.items.length>1?(t.next(),!1):void 0}),i.on("keydown"+n,function(e){37===e.keyCode?t.prev():39===e.keyCode&&t.next()})}),y("UpdateStatus"+n,function(e,a){a.text&&(a.text=B(a.text,t.currItem.index,t.items.length))}),y(c+n,function(e,i,n,o){var r=t.items.length;n.counter=r>1?B(a.tCounter,o.index,r):""}),y("BuildControls"+n,function(){if(t.items.length>1&&a.arrows&&!t.arrowLeft){var i=a.arrowMarkup,n=t.arrowLeft=e(i.replace(/%title%/gi,a.tPrev).replace(/%dir%/gi,"left")).addClass(g),o=t.arrowRight=e(i.replace(/%title%/gi,a.tNext).replace(/%dir%/gi,"right")).addClass(g);n.click(function(){t.prev()}),o.click(function(){t.next()}),t.container.append(n.add(o))}}),y(u+n,function(){t._preloadTimeout&&clearTimeout(t._preloadTimeout),t._preloadTimeout=setTimeout(function(){t.preloadNearbyImages(),t._preloadTimeout=null},16)}),void y(s+n,function(){i.off(n),t.wrap.off("click"+n),t.arrowRight=t.arrowLeft=null}))},next:function(){t.direction=!0,t.index=F(t.index+1),t.updateItemHTML()},prev:function(){t.direction=!1,t.index=F(t.index-1),t.updateItemHTML()},goTo:function(e){t.direction=e>=t.index,t.index=e,t.updateItemHTML()},preloadNearbyImages:function(){var e,a=t.st.gallery.preload,i=Math.min(a[0],t.items.length),n=Math.min(a[1],t.items.length);for(e=1;e<=(t.direction?n:i);e++)t._preloadItem(t.index+e);for(e=1;e<=(t.direction?i:n);e++)t._preloadItem(t.index-e)},_preloadItem:function(a){if(a=F(a),!t.items[a].preloaded){var i=t.items[a];i.parsed||(i=t.parseEl(a)),x("LazyLoad",i),"image"===i.type&&(i.img=e('<img class="mfp-img" />').on("load.mfploader",function(){i.hasSize=!0}).on("error.mfploader",function(){i.hasSize=!0,i.loadError=!0,x("LazyLoadError",i)}).attr("src",i.src)),i.preloaded=!0}}}});var R="retina";e.magnificPopup.registerModule(R,{options:{replaceSrc:function(e){return e.src.replace(/\.\w+$/,function(e){return"@2x"+e})},ratio:1},proto:{initRetina:function(){if(window.devicePixelRatio>1){var e=t.st.retina,a=e.ratio;(a=isNaN(a)?a():a)>1&&(y("ImageHasSize."+R,function(e,t){t.img.css({"max-width":t.img[0].naturalWidth/a,width:"100%"})}),y("ElementParse."+R,function(t,i){i.src=e.replaceSrc(i,a)}))}}}}),C()}),jQuery(document).ready(function(){jQuery("#carousel").length>0?(jQuery(".flexslider_t").flexslider({animation:"slide",controlNav:"thumbnails"}),jQuery("#carousel").flexslider({animation:"slide",controlNav:!1,animationLoop:!1,slideshow:!1,itemWidth:100,itemMargin:0,asNavFor:"#slider"}),jQuery("#slider").flexslider({animation:"slide",smoothHeight:!1,controlNav:!1,animationLoop:!1,slideshow:!1,sync:"#carousel"})):jQuery(".flexslider").flexslider({animation:"slide",pausePlay:!0,useCSS:!1,smoothHeight:!1,start:function(){slides_loaded()}}),use_tinyscroller()?jQuery("#scrollbar1").tinyscrollbar({invertscroll:!0}):set_scroller_height(),jQuery(".gazette_list").hide(),jQuery("#yr2006").show(),jQuery("#gz_choose_year a").click(function(){var e=jQuery(this).text();jQuery(".gazette_list").fadeOut(),jQuery("#yr"+e).fadeIn()}),jQuery("#nav-open-btn").click(function(){jQuery("#nav-open-btn").hide(),jQuery("#nav-close-btn").show(),jQuery(".secondary").show(),"ontouchstart"in document.documentElement&&jQuery("body").addClass("nooverflow"),use_tinyscroller()?jQuery("#scrollbar1").tinyscrollbar({invertscroll:!0}):set_scroller_height(),dataLayer.push({eventCategory:"nav_menu",eventAction:"click",eventLabel:"open",event:"gaEvent"})}),jQuery("#nav-close-btn").click(function(){jQuery("#nav-close-btn").hide(),jQuery("#nav-open-btn").show(),jQuery(".secondary").hide(),jQuery(".secondary").removeAttr("style"),jQuery("body").removeClass("nooverflow"),dataLayer.push({eventCategory:"nav_menu",eventAction:"click",eventLabel:"close",event:"gaEvent"})}),jQuery("html").click(function(){jQuery(".secondary").is(":visible")&&jQuery("#nav-close-btn").is(":visible")&&(jQuery("#nav-close-btn").hide(),jQuery("#nav-open-btn").show(),jQuery(".secondary").hide(),jQuery("body").removeClass("nooverflow"),jQuery(".secondary").removeAttr("style"))}),jQuery(".secondary, #nav-open-btn").click(function(e){e.stopPropagation()}),jQuery("a.show-more").each(function(){var e=jQuery(this).parent().parent().find(".photo-description"),t=e[0];e.height()+1>=t.scrollHeight&&jQuery(this).parent().hide()}),jQuery("a.show-more").click(function(e){var t=jQuery(this).parent().parent().find(".photo-description");if(jQuery(this).hasClass("show-more")){var a=t[0].scrollHeight;t.animate({height:a}),jQuery(this).removeClass("show-more"),jQuery(this).addClass("show-less"),jQuery(this).html("Show Less")}else t.animate({height:"65px"}),jQuery(this).removeClass("show-less"),jQuery(this).addClass("show-more"),jQuery(this).html("Show More");e.preventDefault()}),jQuery(".image-popup").append('<div class="media-action-overlay">&nbsp;</div>'),jQuery(".image-popup").magnificPopup({type:"image",closeOnContentClick:!0,image:{verticalFit:!1}})}),function(){function e(){var e=new XMLHttpRequest;e.open("POST",n,!0),e.setRequestHeader("Content-type","application/x-www-form-urlencoded"),e.send(a)}function t(){setTimeout(function(){e()},1500)}var a,i,n=window.ajaxurl||"/wp-admin/admin-ajax.php",o=window.wpcomVipAnalytics;if("undefined"!=typeof XMLHttpRequest&&o&&!((i=~~o.percentToTrack)&&i<100&&~~(100*Math.random()+1)>i)){a="action=wpcom_vip_analytics";for(var r in o)"percentToTrack"!==r&&o.hasOwnProperty(r)&&(a+="&"+encodeURIComponent(r).replace(/%20/g,"+")+"="+encodeURIComponent(o[r]).replace(/%20/g,"+"));"complete"===document.readyState?t.apply():document.addEventListener?document.addEventListener("DOMContentLoaded",t,!1):document.attachEvent&&document.attachEvent("onreadystatechange",t)}}(),jQuery(document).ready(function(e,t){var a,i=e("li#wp-admin-bar-blog.menupop, li#wp-admin-bar-newdash.menupop, li#wp-admin-bar-my-account.menupop");e("#wp-admin-bar-new-post-types");i.unbind("mouseenter mouseleave").removeProp("hoverIntent_t").removeProp("hoverIntent_s").on("mouseover",function(t){var a=e(t.target).closest("li.menupop");i.not(a).removeClass("ab-hover"),a.toggleClass("ab-hover")}).on("click touchstart",function(t){var i=e(t.target);a.focusSubMenus(i)||(t.preventDefault(),a.toggleMenu(i))}),a={focusSubMenus:function(e){return!e.closest("ul").hasClass("ab-top-menu")&&(e.closest("li"),!0)},toggleMenu:function(t){var i=t.closest("li.menupop"),n=e("html");e("body").off("click.ab-menu"),e("#wpadminbar li.menupop").not(i).removeClass("ab-active wpnt-stayopen wpnt-show"),i.hasClass("ab-active")?(i.removeClass("ab-active"),n.removeClass("ab-menu-open")):(i.addClass("ab-active"),n.addClass("ab-menu-open"),e("body").on("click.ab-menu",function(t){e(t.target).parents("#wpadminbar").length||(t.preventDefault(),a.toggleMenu(i),e("body").off("click.ab-menu"))}))}}}),function(e){function t(e){e=e||{},window._tkq=window._tkq||[],window._tkq.push(["recordEvent",i,e])}function a(e,t){try{return JSON.parse(e)}catch(e){return t}}var i="wpcom_masterbar_click",n={"wp-admin-bar-blog":"my_sites","wp-admin-bar-newdash":"reader","wp-admin-bar-ab-new-post":"write_button","wp-admin-bar-my-account":"my_account","wp-admin-bar-notes":"notifications","wp-admin-bar-switch-site":"my_sites_switch_site","wp-admin-bar-blog-info":"my_sites_site_info","wp-admin-bar-site-view":"my_sites_view_site","wp-admin-bar-blog-stats":"my_sites_site_stats","wp-admin-bar-plan":"my_sites_plan","wp-admin-bar-plan-badge":"my_sites_plan_badge","wp-admin-bar-edit-page":"my_sites_manage_site_pages","wp-admin-bar-new-page-badge":"my_sites_manage_add_page","wp-admin-bar-edit-post":"my_sites_manage_blog_posts","wp-admin-bar-new-post-badge":"my_sites_manage_add_post","wp-admin-bar-edit-attachment":"my_sites_manage_media","wp-admin-bar-new-attachment-badge":"my_sites_manage_add_media","wp-admin-bar-comments":"my_sites_manage_comments","wp-admin-bar-edit-jetpack-testimonial":"my_sites_manage_testimonials","wp-admin-bar-new-jetpack-testimonial":"my_sites_manage_add_testimonial","wp-admin-bar-edit-jetpack-portfolio":"my_sites_manage_portfolio","wp-admin-bar-new-jetpack-portfolio":"my_sites_manage_add_portfolio","wp-admin-bar-themes":"my_sites_personalize_themes","wp-admin-bar-cmz":"my_sites_personalize_themes_customize","wp-admin-bar-sharing":"my_sites_configure_sharing","wp-admin-bar-people":"my_sites_configure_people","wp-admin-bar-people-add":"my_sites_configure_people_add_button","wp-admin-bar-plugins":"my_sites_configure_plugins","wp-admin-bar-domains":"my_sites_configure_domains","wp-admin-bar-domains-add":"my_sites_configure_add_domain","wp-admin-bar-blog-settings":"my_sites_configure_settings","wp-admin-bar-legacy-dashboard":"my_sites_configure_wp_admin","wp-admin-bar-followed-sites":"reader_followed_sites","wp-admin-bar-reader-followed-sites-manage":"reader_manage_followed_sites","wp-admin-bar-discover-discover":"reader_discover","wp-admin-bar-discover-search":"reader_search","wp-admin-bar-my-activity-my-likes":"reader_my_likes","wp-admin-bar-user-info":"my_account_user_name","wp-admin-bar-my-profile":"my_account_profile_my_profile","wp-admin-bar-account-settings":"my_account_profile_account_settings","wp-admin-bar-billing":"my_account_profile_manage_purchases","wp-admin-bar-security":"my_account_profile_security","wp-admin-bar-notifications":"my_account_profile_notifications","wp-admin-bar-get-apps":"my_account_special_get_apps","wp-admin-bar-next-steps":"my_account_special_next_steps","wp-admin-bar-help":"my_account_special_help"},o={openSite:function(e){return{clicked:"masterbar_notifications_panel_site",site_id:e.siteId}},openPost:function(e){return{clicked:"masterbar_notifications_panel_post",site_id:e.siteId,post_id:e.postId}},openComment:function(e){return{clicked:"masterbar_notifications_panel_comment",site_id:e.siteId,post_id:e.postId,comment_id:e.commentId}}};e(document).ready(function(){e(".mb-trackable .ab-item:not(div),#wp-admin-bar-notes .ab-item,#wp-admin-bar-user-info .ab-item,.mb-trackable .ab-secondary").on("click touchstart",function(a){var i=e(a.target),o=i.closest("li");if(o){var r=i.attr("ID")||o.attr("ID");n.hasOwnProperty(r)&&t({clicked:n[r]})}})}),e(window).on("message",function(e){var i=!e.data&&e.originalEvent.data?e.originalEvent:i;if("https://web.archive.org/web/20180107091706/https://widgets.wp.com/"===i.origin){var n="string"==typeof i.data?a(i.data,{}):i.data;if("notesIframeMessage"===n.type){var r=o[n.action];r&&t(r(n))}}})}(jQuery),function(e,t){"object"==typeof exports?module.exports=t():"function"==typeof define&&define.amd?define(t):e.Spinner=t()}(this,function(){"use strict";function e(e,t){var a,i=document.createElement(e||"div");for(a in t)i[a]=t[a];return i}function t(e){for(var t=1,a=arguments.length;t<a;t++)e.appendChild(arguments[t]);return e}function a(e,t,a,i){var n=["opacity",t,~~(100*e),a,i].join("-"),o=.01+a/i*100,r=Math.max(1-(1-e)/t*(100-o),e),s=l.substring(0,l.indexOf("Animation")).toLowerCase(),c=s&&"-"+s+"-"||"";return d[n]||(u.insertRule("@"+c+"keyframes "+n+"{0%{opacity:"+r+"}"+o+"%{opacity:"+e+"}"+(o+.01)+"%{opacity:1}"+(o+t)%100+"%{opacity:"+e+"}100%{opacity:"+r+"}}",u.cssRules.length),d[n]=1),n}function i(e,t){var a,i,n=e.style;if(void 0!==n[t])return t;for(t=t.charAt(0).toUpperCase()+t.slice(1),i=0;i<c.length;i++)if(a=c[i]+t,void 0!==n[a])return a}function n(e,t){for(var a in t)e.style[i(e,a)||a]=t[a];return e}function o(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var i in a)void 0===e[i]&&(e[i]=a[i])}return e}function r(e){for(var t={x:e.offsetLeft,y:e.offsetTop};e=e.offsetParent;)t.x+=e.offsetLeft,t.y+=e.offsetTop;return t}function s(e){if(void 0===this)return new s(e);this.opts=o(e||{},s.defaults,p)}var l,c=["webkit","Moz","ms","O"],d={},u=function(){var a=e("style",{type:"text/css"});return t(document.getElementsByTagName("head")[0],a),a.sheet||a.styleSheet}(),p={lines:12,length:7,width:5,radius:10,rotate:0,corners:1,color:"#000",direction:1,speed:1,trail:100,opacity:.25,fps:20,zIndex:2e9,className:"spinner",top:"auto",left:"auto",position:"relative"};s.defaults={},o(s.prototype,{spin:function(t){this.stop();var a,i,o=this,s=o.opts,c=o.el=n(e(0,{className:s.className}),{position:s.position,width:0,zIndex:s.zIndex}),d=s.radius+s.length+s.width;if(t&&(t.insertBefore(c,t.firstChild||null),i=r(t),a=r(c),n(c,{left:("auto"==s.left?i.x-a.x+(t.offsetWidth>>1):parseInt(s.left,10)+d)+"px",top:("auto"==s.top?i.y-a.y+(t.offsetHeight>>1):parseInt(s.top,10)+d)+"px"})),c.setAttribute("role","progressbar"),o.lines(c,o.opts),!l){var u,p=0,m=(s.lines-1)*(1-s.direction)/2,f=s.fps,h=f/s.speed,g=(1-s.opacity)/(h*s.trail/100),v=h/s.lines;!function e(){p++;for(var t=0;t<s.lines;t++)u=Math.max(1-(p+(s.lines-t)*v)%h*g,s.opacity),o.opacity(c,t*s.direction+m,u,s);o.timeout=o.el&&setTimeout(e,~~(1e3/f))}()}return o},stop:function(){var e=this.el;return e&&(clearTimeout(this.timeout),e.parentNode&&e.parentNode.removeChild(e),this.el=void 0),this},lines:function(i,o){function r(t,a){return n(e(),{position:"absolute",width:o.length+o.width+"px",height:o.width+"px",background:t,boxShadow:a,transformOrigin:"left",transform:"rotate("+~~(360/o.lines*c+o.rotate)+"deg) translate("+o.radius+"px,0)",borderRadius:(o.corners*o.width>>1)+"px"})}for(var s,c=0,d=(o.lines-1)*(1-o.direction)/2;c<o.lines;c++)s=n(e(),{position:"absolute",top:1+~(o.width/2)+"px",transform:o.hwaccel?"translate3d(0,0,0)":"",opacity:o.opacity,animation:l&&a(o.opacity,o.trail,d+c*o.direction,o.lines)+" "+1/o.speed+"s linear infinite"}),o.shadow&&t(s,n(r("#000","0 0 4px #000"),{top:"2px"})),t(i,t(s,r(o.color,"0 0 1px rgba(0,0,0,.1)")));return i},opacity:function(e,t,a){t<e.childNodes.length&&(e.childNodes[t].style.opacity=a)}});var m=n(e("group"),{behavior:"url(#default#VML)"});return!i(m,"transform")&&m.adj?function(){function a(t,a){return e("<"+t+' xmlns="urn:schemas-microsoft.com:vml" class="spin-vml">',a)}u.addRule(".spin-vml","behavior:url(#default#VML)"),s.prototype.lines=function(e,i){function o(){return n(a("group",{coordsize:c+" "+c,coordorigin:-l+" "+-l}),{width:c,height:c})}function r(e,r,s){t(u,t(n(o(),{rotation:360/i.lines*e+"deg",left:~~r}),t(n(a("roundrect",{arcsize:i.corners}),{width:l,height:i.width,left:i.radius,top:-i.width>>1,filter:s}),a("fill",{color:i.color,opacity:i.opacity}),a("stroke",{opacity:0}))))}var s,l=i.length+i.width,c=2*l,d=2*-(i.width+i.length)+"px",u=n(o(),{position:"absolute",top:d,left:d});if(i.shadow)for(s=1;s<=i.lines;s++)r(s,-2,"progid:DXImageTransform.Microsoft.Blur(pixelradius=2,makeshadow=1,shadowopacity=.3)");for(s=1;s<=i.lines;s++)r(s);return t(e,u)},s.prototype.opacity=function(e,t,a,i){var n=e.firstChild;i=i.shadow&&i.lines||0,n&&t+i<n.childNodes.length&&(n=(n=(n=n.childNodes[t+i])&&n.firstChild)&&n.firstChild)&&(n.opacity=a)}}():l=i(m,"animation"),s}),function(e){if("object"==typeof exports)e(require("jquery"),require("spin"));else if("function"==typeof define&&define.amd)define(["jquery","spin"],e);else{if(!window.Spinner)throw new Error("Spin.js not present");e(window.jQuery,window.Spinner)}}(function(e,t){e.fn.spin=function(a,i){return this.each(function(){var n=e(this),o=n.data();if(o.spinner&&(o.spinner.stop(),delete o.spinner),!1!==a){if(void 0!==(a=e.extend({color:i||n.css("color")},e.fn.spin.presets[a]||a)).right&&void 0!==a.length&&void 0!==a.width&&void 0!==a.radius){var r=n.css("padding-left");r=void 0===r?0:parseInt(r,10),a.left=n.outerWidth()-2*(a.length+a.width+a.radius)-r-a.right,delete a.right}o.spinner=new t(a).spin(this)}})},e.fn.spin.presets={tiny:{lines:8,length:2,width:2,radius:3},small:{lines:8,length:4,width:3,radius:5},large:{lines:10,length:8,width:4,radius:8}}}),function(e){e.fn.spin.presets.wp={trail:60,speed:1.3},e.fn.spin.presets.small=e.extend({lines:8,length:2,width:2,radius:3},e.fn.spin.presets.wp),e.fn.spin.presets.medium=e.extend({lines:8,length:4,width:3,radius:5},e.fn.spin.presets.wp),e.fn.spin.presets.large=e.extend({lines:10,length:6,width:4,radius:7},e.fn.spin.presets.wp),e.fn.spin.presets["small-left"]=e.extend({left:5},e.fn.spin.presets.small),e.fn.spin.presets["small-right"]=e.extend({right:5},e.fn.spin.presets.small),e.fn.spin.presets["medium-left"]=e.extend({left:5},e.fn.spin.presets.medium),e.fn.spin.presets["medium-right"]=e.extend({right:5},e.fn.spin.presets.medium),e.fn.spin.presets["large-left"]=e.extend({left:5},e.fn.spin.presets.large),e.fn.spin.presets["large-right"]=e.extend({right:5},e.fn.spin.presets.large)}(jQuery),void 0===wpcom)var wpcom={};wpcom.carousel=function(){var e=jetpackCarouselStrings.widths,t=jetpackCarouselStrings.stats_query_args,a=function(e,t,a){var i=new RegExp(t+"=[^?&]+");return e.match(i)?e.replace(i,t+"="+a):e+(-1!==e.indexOf("?")?"&":"?")+t+"="+a};return{findFirstLargeEnoughWidth:function(t,a,i,n){for(var o=a/t,r=0;r<e.length;++r)if(e[r]>=i||e[r]*o>=n)return e[r];return t},addWidthToImageURL:function(e,t){return t=parseInt(t,10),void 0!==window.devicePixelRatio&&window.devicePixelRatio>1&&(t=Math.round(t*window.devicePixelRatio)),e=a(e,"w",t),e=a(e,"h","")},stat:function(e){"string"!=typeof e&&(e=e.join(",")),(new Image).src=window.location.protocol+"//web.archive.org/web/20180107091706/https://pixel.wp.com/g.gif?v=wpcom-no-pv&x_carousel="+e+"&baba="+Math.random()},pageview:function(e){(new Image).src=window.location.protocol+"//web.archive.org/web/20180107091706/https://pixel.wp.com/g.gif?host="+encodeURIComponent(window.location.host)+"&ref="+encodeURIComponent(document.referrer)+"&rand="+Math.random()+"&"+t+"&post="+encodeURIComponent(e)}}}(jQuery),jQuery(document).ready(function(e){var t,a,i,n,o,r,s,l,c,d,u,p,m,f,h,g,v,w,b,y=110,_=e("body").css("overflow"),x=e("html").css("overflow"),j="";window.innerWidth<=760&&(y=Math.round(window.innerWidth/760*110))<40&&("ontouchstart"in window||window.DocumentTouch&&document instanceof DocumentTouch)&&(y=0),void 0===Date.now&&(Date.now=function(){return(new Date).getTime()});var C=function(e){switch(e.which){case 38:e.preventDefault(),n.scrollTop(n.scrollTop()-100);break;case 40:e.preventDefault(),n.scrollTop(n.scrollTop()+100);break;case 39:e.preventDefault(),i.jp_carousel("next");break;case 37:case 8:e.preventDefault(),i.jp_carousel("previous");break;case 27:e.preventDefault(),n.jp_carousel("close")}},k=function(){clearTimeout(d),d=setTimeout(function(){i.jp_carousel("slides").jp_carousel("fitSlide",!0),i.jp_carousel("updateSlidePositions",!0),i.jp_carousel("fitMeta",!0)},200)},S=function(){if(!t){t=e("<div></div>").addClass("jp-carousel-overlay").css({position:"absolute",top:0,right:0,bottom:0,left:0});var d='<a class="jp-carousel-commentlink" href="#">'+jetpackCarouselStrings.comment+"</a>";1===Number(jetpackCarouselStrings.is_logged_in)&&1===Number(jetpackCarouselStrings.is_public&&1===Number(jetpackCarouselStrings.reblog_enabled))&&(d+='<a class="jp-carousel-reblog" href="#">'+jetpackCarouselStrings.reblog+"</a>"),d=e('<div class="jp-carousel-buttons">'+d+"</div>"),c=e('<h2 itemprop="caption description"></h2>'),u=e('<div class="jp-carousel-photo-info"></div>').append(c),(h=e("<div></div>").addClass("jp-carousel-image-meta").css({float:"right","margin-top":"20px",width:"250px"})).append(d).append("<ul class='jp-carousel-image-exif' style='display:none;'></ul>").append("<a class='jp-carousel-image-download' style='display:none;'></a>").append("<div class='jp-carousel-image-map' style='display:none;'></div>"),g=e("<div></div>").addClass("jp-carousel-titleanddesc").css({width:"100%","margin-top":h.css("margin-top")});var m='<div id="jp-carousel-comment-form-container">';jetpackCarouselStrings.local_comments_commenting_as&&jetpackCarouselStrings.local_comments_commenting_as.length&&(1!==Number(jetpackCarouselStrings.is_logged_in)&&1===Number(jetpackCarouselStrings.comment_registration)?m+='<div id="jp-carousel-comment-form-commenting-as">'+jetpackCarouselStrings.local_comments_commenting_as+"</div>":(m+='<form id="jp-carousel-comment-form">',m+='<textarea name="comment" class="jp-carousel-comment-form-field jp-carousel-comment-form-textarea" id="jp-carousel-comment-form-comment-field" placeholder="'+jetpackCarouselStrings.write_comment+'"></textarea>',m+='<div id="jp-carousel-comment-form-submit-and-info-wrapper">',m+='<div id="jp-carousel-comment-form-commenting-as">'+jetpackCarouselStrings.local_comments_commenting_as+"</div>",m+='<input type="submit" name="submit" class="jp-carousel-comment-form-button" id="jp-carousel-comment-form-button-submit" value="'+jetpackCarouselStrings.post_comment+'" />',m+='<span id="jp-carousel-comment-form-spinner">&nbsp;</span>',m+='<div id="jp-carousel-comment-post-results"></div>',m+="</div>",m+="</form>")),v=e(m+="</div>").css({width:"100%","margin-top":"20px",color:"#999"}),a=e("<div></div>").addClass("jp-carousel-comments").css({width:"100%",bottom:"10px","margin-top":"20px"});var f=e('<div id="jp-carousel-comments-loading"><span>'+jetpackCarouselStrings.loading_comments+"</span></div>").css({width:"100%",bottom:"10px","margin-top":"20px"}),b=e(window).width()-2*y-(h.width()+40);b+="px",w=e("<div></div>").addClass("jp-carousel-left-column-wrapper").css({width:Math.floor(b)}).append(g).append(v).append(a).append(f);var _=e("<div></div>").addClass("jp-carousel-fadeaway");s=e("<div></div>").addClass("jp-carousel-info").css({top:Math.floor(e(window).height()/100*85),left:y,right:y}).append(u).append(h),window.innerWidth<=760?(u.remove().insertAfter(g),s.prepend(w)):s.append(w);var x=e(window).height()-parseInt(s.css("top"),10)+"px";o=e("<div><span></span></div>").addClass("jp-carousel-next-button").css({right:"15px"}).hide(),r=e("<div><span></span></div>").addClass("jp-carousel-previous-button").css({left:0}).hide(),o.add(r).css({position:"fixed",top:"40px",bottom:x,width:y}),i=e("<div></div>").addClass("jp-carousel").css({position:"absolute",top:0,bottom:x,left:0,right:0}),p=e('<div class="jp-carousel-close-hint"><span>&times;</span></div>').css({position:"fixed"}),n=e("<div></div>").addClass("jp-carousel-wrap").addClass("jp-carousel-transitions"),"white"===jetpackCarouselStrings.background_color&&n.addClass("jp-carousel-light"),n.attr("itemscope",""),n.attr("itemtype","https://web.archive.org/web/20180107091706/https://schema.org/ImageGallery"),n.css({position:"fixed",top:0,right:0,bottom:0,left:0,"z-index":2147483647,"overflow-x":"hidden","overflow-y":"auto",direction:"ltr"}).hide().append(t).append(i).append(_).append(s).append(o).append(r).append(p).appendTo(e("body")).click(function(t){var a=e(t.target),o=a.parents("div.jp-carousel-wrap"),r=o.data("carousel-extra"),l=o.find("div.selected"),c=l.data("attachment-id");if(r=r||[],a.is(i)||a.parents().add(a).is(p))n.jp_carousel("close");else if(a.hasClass("jp-carousel-reblog"))t.preventDefault(),t.stopPropagation(),a.hasClass("reblogged")||(a.jp_carousel("show_reblog_box"),wpcom.carousel.stat("reblog_show_box"));else if(a.parents("#carousel-reblog-box").length){if(a.is("a.cancel"))t.preventDefault(),t.stopPropagation(),a.jp_carousel("hide_reblog_box"),wpcom.carousel.stat("reblog_cancel");else if(a.is('input[type="submit"]')){t.preventDefault(),t.stopPropagation();var d=e("#carousel-reblog-box textarea").val();jetpackCarouselStrings.reblog_add_thoughts===d&&(d=""),e("#carousel-reblog-submit").val(jetpackCarouselStrings.reblogging),e("#carousel-reblog-submit").prop("disabled",!0),e("#carousel-reblog-box div.submit span.canceltext").spin("small"),e.post(jetpackCarouselStrings.ajaxurl,{action:"post_reblog",reblog_source:"carousel",original_blog_id:e("#carousel-reblog-box input#carousel-reblog-blog-id").val(),original_post_id:e(".jp-carousel div.selected").data("attachment-id"),blog_id:e("#carousel-reblog-box select").val(),blog_url:e("#carousel-reblog-box input#carousel-reblog-blog-url").val(),blog_title:e("#carousel-reblog-box input#carousel-reblog-blog-title").val(),post_url:e("#carousel-reblog-box input#carousel-reblog-post-url").val(),post_title:l.data("caption")||e("#carousel-reblog-box input#carousel-reblog-post-title").val(),note:d,_wpnonce:e("#carousel-reblog-box #_wpnonce").val()},function(){e("#carousel-reblog-box").css({height:e("#carousel-reblog-box").height()+"px"}).slideUp("fast"),e("a.jp-carousel-reblog").html(jetpackCarouselStrings.reblogged).removeClass("reblog").addClass("reblogged"),e("#carousel-reblog-box div.submit span.canceltext").spin(!1),e("#carousel-reblog-submit").val(jetpackCarouselStrings.post_reblog),e("div.jp-carousel-info").children().not("#carousel-reblog-box").fadeIn("fast"),l.data("reblogged",1),e("div.gallery").find('img[data-attachment-id="'+l.data("attachment-id")+'"]').data("reblogged",1)},"json"),wpcom.carousel.stat("reblog_submit")}}else if(a.hasClass("jp-carousel-image-download"))wpcom.carousel.stat("download_original_click");else if(a.hasClass("jp-carousel-commentlink"))t.preventDefault(),t.stopPropagation(),e(window).unbind("keydown",C),n.animate({scrollTop:parseInt(s.position().top,10)},"fast"),e("#jp-carousel-comment-form-submit-and-info-wrapper").slideDown("fast"),e("#jp-carousel-comment-form-comment-field").focus();else if(a.hasClass("jp-carousel-comment-login")){var u=jetpackCarouselStrings.login_url+"%23jp-carousel-"+c;window.location.href=u}else if(a.parents("#jp-carousel-comment-form-container").length){var m=e("#jp-carousel-comment-form-comment-field").blur(function(){e(window).bind("keydown",C)}).focus(function(){e(window).unbind("keydown",C)}),f=e("#jp-carousel-comment-form-email-field").blur(function(){e(window).bind("keydown",C)}).focus(function(){e(window).unbind("keydown",C)}),h=e("#jp-carousel-comment-form-author-field").blur(function(){e(window).bind("keydown",C)}).focus(function(){e(window).unbind("keydown",C)}),g=e("#jp-carousel-comment-form-url-field").blur(function(){e(window).bind("keydown",C)}).focus(function(){e(window).unbind("keydown",C)});if(m&&m.attr("id")===a.attr("id"))e(window).unbind("keydown",C),e("#jp-carousel-comment-form-submit-and-info-wrapper").slideDown("fast");else if(a.is('input[type="submit"]')){t.preventDefault(),t.stopPropagation(),e("#jp-carousel-comment-form-spinner").spin("small","white");var v={action:"post_attachment_comment",nonce:jetpackCarouselStrings.nonce,blog_id:r.blog_id,id:c,comment:m.val()};if(!v.comment.length)return void i.jp_carousel("postCommentError",{field:"jp-carousel-comment-form-comment-field",error:jetpackCarouselStrings.no_comment_text});if(1!==Number(jetpackCarouselStrings.is_logged_in)&&(v.email=f.val(),v.author=h.val(),v.url=g.val(),1===Number(jetpackCarouselStrings.require_name_email))){if(!v.email.length||!v.email.match("@"))return void i.jp_carousel("postCommentError",{field:"jp-carousel-comment-form-email-field",error:jetpackCarouselStrings.no_comment_email});if(!v.author.length)return void i.jp_carousel("postCommentError",{field:"jp-carousel-comment-form-author-field",error:jetpackCarouselStrings.no_comment_author})}e.ajax({type:"POST",url:jetpackCarouselStrings.ajaxurl,data:v,dataType:"json",success:function(t){"approved"===t.comment_status?e("#jp-carousel-comment-post-results").slideUp("fast").html('<span class="jp-carousel-comment-post-success">'+jetpackCarouselStrings.comment_approved+"</span>").slideDown("fast"):"unapproved"===t.comment_status?e("#jp-carousel-comment-post-results").slideUp("fast").html('<span class="jp-carousel-comment-post-success">'+jetpackCarouselStrings.comment_unapproved+"</span>").slideDown("fast"):e("#jp-carousel-comment-post-results").slideUp("fast").html('<span class="jp-carousel-comment-post-error">'+jetpackCarouselStrings.comment_post_error+"</span>").slideDown("fast"),i.jp_carousel("clearCommentTextAreaValue"),i.jp_carousel("getComments",{attachment_id:c,offset:0,clear:!0}),e("#jp-carousel-comment-form-button-submit").val(jetpackCarouselStrings.post_comment),e("#jp-carousel-comment-form-spinner").spin(!1)},error:function(){i.jp_carousel("postCommentError",{field:"jp-carousel-comment-form-comment-field",error:jetpackCarouselStrings.comment_post_error})}})}}else a.parents(".jp-carousel-info").length||n.jp_carousel("next")}).bind("jp_carousel.afterOpen",function(){e(window).bind("keydown",C),e(window).bind("resize",k),i.opened=!0,k()}).bind("jp_carousel.beforeClose",function(){var t=e(window).scrollTop();e(window).unbind("keydown",C),e(window).unbind("resize",k),e(window).scrollTop(t),i.jp_carousel("hide_reblog_box")}).bind("jp_carousel.afterClose",function(){window.location.hash&&history.back&&history.back(),j="",i.opened=!1}).on("transitionend.jp-carousel ",".jp-carousel-slide",function(t){if("transform"===t.originalEvent.propertyName){var a=(Date.now()-l)/1e3/t.originalEvent.elapsedTime;n.off("transitionend.jp-carousel"),a>=2&&e(".jp-carousel-transitions").removeClass("jp-carousel-transitions")}}),e(".jp-carousel-wrap").touchwipe({wipeLeft:function(e){e.preventDefault(),i.jp_carousel("next")},wipeRight:function(e){e.preventDefault(),i.jp_carousel("previous")},preventDefaultEvents:!1}),o.add(r).click(function(e){e.preventDefault(),e.stopPropagation(),o.is(this)?i.jp_carousel("next"):i.jp_carousel("previous")})}},I={testForData:function(t){return!(!(t=e(t)).length||!t.data("carousel-extra"))},testIfOpened:function(){return!(void 0===i||void 0===i.opened||!i.opened)},openOrSelectSlide:function(t){e(this).jp_carousel("testIfOpened")?i.jp_carousel("selectSlideAtIndex",t):e(this).jp_carousel("open",{start_index:t})},open:function(t){var a={items_selector:".gallery-item [data-attachment-id], .tiled-gallery-item [data-attachment-id], img[data-attachment-id]",start_index:0},o=e(this).data("carousel-extra");if(o&&(S(),!i.jp_carousel("testIfOpened")))return _=e("body").css("overflow"),e("body").css("overflow","hidden"),x=e("html").css("overflow"),e("html").css("overflow","hidden"),b=e(window).scrollTop(),n.data("carousel-extra",o),wpcom.carousel.stat(["open","view_image"]),this.each(function(){var o=e(this);t&&e.extend(a,t),-1===a.start_index&&(a.start_index=0),n.trigger("jp_carousel.beforeOpen").fadeIn("fast",function(){n.trigger("jp_carousel.afterOpen"),i.jp_carousel("initSlides",o.find(a.items_selector),a.start_index).jp_carousel("selectSlideAtIndex",a.start_index)}),i.html("")})},selectSlideAtIndex:function(e){var t=this.jp_carousel("slides"),a=t.eq(e);return 0===a.length&&(a=t.eq(0)),i.jp_carousel("selectSlide",a,!1),this},close:function(){return e("body").css("overflow",_),e("html").css("overflow",x),this.jp_carousel("clearCommentTextAreaValue"),n.trigger("jp_carousel.beforeClose").fadeOut("fast",function(){n.trigger("jp_carousel.afterClose"),e(window).scrollTop(b)})},next:function(){var e=i.jp_carousel("nextSlide");n.animate({scrollTop:0},"fast"),i.jp_carousel("hide_reblog_box"),e&&(this.jp_carousel("selectSlide",e),wpcom.carousel.stat(["next","view_image"]))},previous:function(){var e=i.jp_carousel("prevSlide");n.animate({scrollTop:0},"fast"),i.jp_carousel("hide_reblog_box"),e&&(this.jp_carousel("selectSlide",e),wpcom.carousel.stat(["previous","view_image"]))},resetButtons:function(t){t.data("reblogged")?e(".jp-carousel-buttons a.jp-carousel-reblog").addClass("reblogged").text(jetpackCarouselStrings.reblogged):e(".jp-carousel-buttons a.jp-carousel-reblog").removeClass("reblogged").text(jetpackCarouselStrings.reblog)},selectedSlide:function(){return this.find(".selected")},setSlidePosition:function(e){return l=Date.now(),this.css({"-webkit-transform":"translate3d("+e+"px,0,0)","-moz-transform":"translate3d("+e+"px,0,0)","-ms-transform":"translate("+e+"px,0)","-o-transform":"translate("+e+"px,0)",transform:"translate3d("+e+"px,0,0)"})},updateSlidePositions:function(e){var t=this.jp_carousel("selectedSlide"),a=i.width(),n=t.width(),o=i.jp_carousel("prevSlide"),r=i.jp_carousel("nextSlide"),s=o.prev(),l=r.next(),c=Math.floor(.5*(a-n));t.jp_carousel("setSlidePosition",c).show(),i.jp_carousel("fitInfo",e),1===(f.is(t.prevAll())?1:-1)?(l.is(o)||l.jp_carousel("setSlidePosition",a+r.width()).show(),s.is(r)||s.jp_carousel("setSlidePosition",-s.width()-n).show()):l.is(o)||l.jp_carousel("setSlidePosition",a+n).show(),o.jp_carousel("setSlidePosition",Math.floor(-o.width()+.75*y)).show(),r.jp_carousel("setSlidePosition",Math.ceil(a-.75*y)).show()},selectSlide:function(t,a){f=this.find(".selected").removeClass("selected");var o,r,s=i.jp_carousel("slides").css({position:"fixed"}),l=e(t).addClass("selected").css({position:"relative"}),d=l.data("attachment-id"),u=i.jp_carousel("prevSlide"),p=i.jp_carousel("nextSlide"),m=u.prev(),h=p.next();i.jp_carousel("loadFullImage",l),c.hide(),0===p.length&&s.length<=2?e(".jp-carousel-next-button").hide():e(".jp-carousel-next-button").show(),0===u.length&&s.length<=2?e(".jp-carousel-previous-button").hide():e(".jp-carousel-previous-button").show(),o=l.add(u).add(m).add(p).add(h).jp_carousel("loadSlide"),s.not(o).hide(),i.jp_carousel("updateSlidePositions",a),i.jp_carousel("resetButtons",l),n.trigger("jp_carousel.selectSlide",[l]),i.jp_carousel("getTitleDesc",{title:l.data("title"),desc:l.data("desc")});var g=l.data("image-meta");i.jp_carousel("updateExif",g),i.jp_carousel("updateFullSizeLink",l),i.jp_carousel("updateMap",g),i.jp_carousel("testCommentsOpened",l.data("comments-opened")),i.jp_carousel("getComments",{attachment_id:d,offset:0,clear:!0}),e("#jp-carousel-comment-post-results").slideUp(),l.data("caption")?((r=e("<div />").text(l.data("caption")).html())===e("<div />").text(l.data("title")).html()&&e(".jp-carousel-titleanddesc-title").fadeOut("fast").empty(),r===e("<div />").text(l.data("desc")).html()&&e(".jp-carousel-titleanddesc-desc").fadeOut("fast").empty(),c.html(l.data("caption")).fadeIn("slow")):c.fadeOut("fast").empty(),wpcom.carousel.pageview(d),e(p).add(u).each(function(){i.jp_carousel("loadFullImage",e(this))}),window.location.hash=j="#jp-carousel-"+d},slides:function(){return this.find(".jp-carousel-slide")},slideDimensions:function(){return{width:e(window).width()-2*y,height:Math.floor(e(window).height()/100*85-60)}},loadSlide:function(){return this.each(function(){var t=e(this);t.find("img").one("load",function(){t.jp_carousel("fitSlide",!1)})})},bestFit:function(){var e,t,a=i.jp_carousel("slideDimensions"),n=this.jp_carousel("originalDimensions"),o=n.width/n.height,r=1,s=1;return n.width>a.width&&(r=a.width/n.width),n.height>a.height&&(s=a.height/n.height),r<s?(e=a.width,t=Math.floor(e/o)):s<r?(t=a.height,e=Math.floor(t*o)):(e=n.width,t=n.height),{width:e,height:t}},fitInfo:function(){var e=this.jp_carousel("selectedSlide").jp_carousel("bestFit");return u.css({left:Math.floor(.5*(s.width()-e.width)),width:Math.floor(e.width)}),this},fitMeta:function(t){var a={top:Math.floor(e(window).height()/100*85+5)+"px"},i={width:s.width()-(h.width()+80)+"px"};t?(s.animate(a),w.animate(i)):(s.animate(a),w.css(i))},fitSlide:function(){return this.each(function(){var t=e(this),a=t.jp_carousel("bestFit"),n=i.jp_carousel("slideDimensions");a.left=0,a.top=Math.floor(.5*(n.height-a.height))+40,t.css(a)})},texturize:function(t){return t=""+t,t=t.replace(/'/g,"&#8217;").replace(/&#039;/g,"&#8217;").replace(/[\u2019]/g,"&#8217;"),t=t.replace(/"/g,"&#8221;").replace(/&#034;/g,"&#8221;").replace(/&quot;/g,"&#8221;").replace(/[\u201D]/g,"&#8221;"),t=t.replace(/([\w]+)=&#[\d]+;(.+?)&#[\d]+;/g,'$1="$2"'),e.trim(t)},initSlides:function(t,a){t.length<2?e(".jp-carousel-next-button, .jp-carousel-previous-button").hide():e(".jp-carousel-next-button, .jp-carousel-previous-button").show(),t.each(function(){var t,a=e(this),n=a.data("orig-size")||"",o=i.jp_carousel("slideDimensions"),r=n.split(","),s=a.data("medium-file")||"",l=a.data("large-file")||"";n={width:parseInt(r[0],10),height:parseInt(r[1],10)},void 0!==wpcom?(-1!==(t=a.attr("src")||a.attr("original")||a.data("original")||a.data("lazy-src")).indexOf("imgpress")&&(t=a.data("orig-file")),t=wpcom.carousel.addWidthToImageURL(t,wpcom.carousel.findFirstLargeEnoughWidth(n.width,n.height,o.width,o.height))):(t=a.data("orig-file"),t=i.jp_carousel("selectBestImageSize",{orig_file:t,orig_width:n.width,orig_height:n.height,max_width:o.width,max_height:o.height,medium_file:s,large_file:l})),e(this).data("gallery-src",t)}),0!==a&&(e("<img/>")[0].src=e(t[a]).data("gallery-src"));var n=t.first().closest(".tiled-gallery.type-rectangular").length>0;return t.each(function(t){var o=e(this),r=o.data("reblogged")||0,s=o.data("attachment-id")||0,l=o.data("comments-opened")||0,c=o.data("image-meta")||{},d=o.data("orig-size")||"",u={width:o[0].naturalWidth,height:o[0].naturalHeight},p=o.data("image-title")||"",m=o.data("image-description")||"",f=o.parents(".gallery-item").find(".gallery-caption").html()||"",h=o.data("gallery-src")||"",g=o.data("medium-file")||"",v=o.data("large-file")||"",w=o.data("orig-file")||"",b=o.parents("div.tiled-gallery-item").find("div.tiled-gallery-caption").html();if(b&&(f=b),s&&d.length){p=i.jp_carousel("texturize",p),m=i.jp_carousel("texturize",m),f=i.jp_carousel("texturize",f);var y=e("<img/>").attr("src","data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7").css("width","100%").css("height","100%"),_=e('<div class="jp-carousel-slide" itemprop="associatedMedia" itemscope itemtype="https://web.archive.org/web/20180107091706/https://schema.org/ImageObject"></div>').hide().css({left:t<a?-1e3:i.width()}).append(y).appendTo(i).data("src",h).data("title",p).data("desc",m).data("caption",f).data("attachment-id",s).data("permalink",o.parents("a").attr("href")).data("orig-size",d).data("comments-opened",l).data("image-meta",c).data("medium-file",g).data("large-file",v).data("orig-file",w).data("thumb-size",u).data("reblogged",r);n&&_.data("preview-image",o.attr("src")).css({"background-image":'url("'+o.attr("src")+'")',"background-size":"100% 100%","background-position":"center center"}),_.jp_carousel("fitSlide",!1)}}),this},selectBestImageSize:function(e){if("object"!=typeof e&&(e={}),void 0===e.orig_file)return"";if(void 0===e.orig_width||void 0===e.max_width)return e.orig_file;if(void 0===e.medium_file||void 0===e.large_file)return e.orig_file;var t=document.createElement("a");t.href=e.large_file;var a=null!=t.hostname.match(/^i[\d]{1}.wp.com$/i),n=i.jp_carousel("getImageSizeParts",e.medium_file,e.orig_width,a),o=i.jp_carousel("getImageSizeParts",e.large_file,e.orig_width,a),r=parseInt(o[0],10),s=parseInt(o[1],10),l=parseInt(n[0],10),c=parseInt(n[1],10);return e.orig_max_width=e.max_width,e.orig_max_height=e.max_height,void 0!==window.devicePixelRatio&&window.devicePixelRatio>1&&(e.max_width=e.max_width*window.devicePixelRatio,e.max_height=e.max_height*window.devicePixelRatio),r>=e.max_width||s>=e.max_height?e.large_file:l>=e.max_width||c>=e.max_height?e.medium_file:e.orig_file},show_reblog_box:function(){e("#carousel-reblog-box textarea").val(jetpackCarouselStrings.reblog_add_thoughts),e("#carousel-reblog-box p.response").remove(),e("#carousel-reblog-box div.submit, #carousel-reblog-box div.submit span.canceltext").show(),e("#carousel-reblog-box div.submit input[type=submit]").prop("disabled",!1);var t=e(".jp-carousel div.selected");e("#carousel-reblog-box input#carousel-reblog-post-url").val(t.data("permalink")),e("#carousel-reblog-box input#carousel-reblog-post-title").val(e("div.jp-carousel-info").children("h2").text()),e("div.jp-carousel-info").append(e("#carousel-reblog-box")).children().fadeOut("fast"),e("#carousel-reblog-box").fadeIn("fast")},hide_reblog_box:function(){e("div.jp-carousel-info").children().not("#carousel-reblog-box").fadeIn("fast"),e("#carousel-reblog-box").fadeOut("fast")},originalDimensions:function(){var t=e(this).data("orig-size").split(",");return{width:parseInt(t[0],10),height:parseInt(t[1],10)}},format:function(e){if("object"!=typeof e&&(e={}),e.text&&void 0!==e.text)return e.replacements&&void 0!==e.replacements?e.text.replace(/{(\d+)}/g,function(t,a){return void 0!==e.replacements[a]?e.replacements[a]:t}):e.text},shutterSpeed:function(e){return e>=1?Math.round(10*e)/10+"s":"1/"+Math.round(1/e)+"s"},parseTitleDesc:function(t){return!t.match(" ")&&t.match("_")?"":(e(["CIMG","DSC_","DSCF","DSCN","DUW","GEDC","IMG","JD","MGP","PICT","Imagen","Foto","DSC","Scan","SANY","SAM","Screen Shot [0-9]+"]).each(function(e,a){new RegExp("^"+a).test(t)&&(t="")}),t)},getTitleDesc:function(t){var a,n="",o="",r="";(a=e("div.jp-carousel-titleanddesc","div.jp-carousel-wrap")).hide(),n=i.jp_carousel("parseTitleDesc",t.title)||"",o=i.jp_carousel("parseTitleDesc",t.desc)||"",(n.length||o.length)&&(e("<div />").html(n).text()===e("<div />").html(o).text()&&(n=""),r=n.length?'<div class="jp-carousel-titleanddesc-title">'+n+"</div>":"",r+=o.length?'<div class="jp-carousel-titleanddesc-desc">'+o+"</div>":"",a.html(r).fadeIn("slow")),e("div#jp-carousel-comment-form-container").css("margin-top","20px"),e("div#jp-carousel-comments-loading").css("margin-top","20px")},updateExif:function(t){if(!t||1!==Number(jetpackCarouselStrings.display_exif))return!1;var a=e("<ul class='jp-carousel-image-exif'></ul>");e.each(t,function(t,n){if(0!==parseFloat(n)&&n.length&&-1!==e.inArray(t,["camera","aperture","shutter_speed","focal_length"])){switch(t){case"focal_length":n+="mm";break;case"shutter_speed":n=i.jp_carousel("shutterSpeed",n);break;case"aperture":n="f/"+n}a.append("<li><h5>"+jetpackCarouselStrings[t]+"</h5>"+n+"</li>")}}),e("div.jp-carousel-image-meta ul.jp-carousel-image-exif").replaceWith(a)},updateFullSizeLink:function(t){if(!t||!t.data)return!1;var a,n=t.data("orig-size").split(","),o=document.createElement("a");o.href=t.data("src").replace(/\?.+$/,""),a=null!==o.hostname.match(/^i[\d]{1}.wp.com$/i)?o.href:t.data("orig-file").replace(/\?.+$/,"");var r=e("<a>"+i.jp_carousel("format",{text:jetpackCarouselStrings.download_original,replacements:n})+"</a>").addClass("jp-carousel-image-download").attr("href",a).attr("target","_blank");e("div.jp-carousel-image-meta a.jp-carousel-image-download").replaceWith(r)},updateMap:function(t){if(t.latitude&&t.longitude&&1===Number(jetpackCarouselStrings.display_geo)){var a=t.latitude,i=t.longitude,n=e("div.jp-carousel-image-meta","div.jp-carousel-wrap"),o="&scale=2&style=feature:all|element:all|invert_lightness:true|hue:0x0077FF|saturation:-50|lightness:-5|gamma:0.91";e("<div></div>").addClass("jp-carousel-image-map").html('<img width="154" height="154" src="https://web.archive.org/web/20180107091706/https://maps.googleapis.com/maps/api/staticmap?                            center='+a+","+i+"&                            zoom=8&                            size=154x154&                            sensor=false&                            markers=size:medium%7Ccolor:blue%7C"+a+","+i+o+'" class="gmap-main" />                                                    <div class="gmap-topright"><div class="imgclip"><img width="175" height="154" src="https://web.archive.org/web/20180107091706/https://maps.googleapis.com/maps/api/staticmap?                            center='+a+","+i+"&                            zoom=3&                            size=175x154&                            sensor=false&                            markers=size:small%7Ccolor:blue%7C"+a+","+i+o+'"c /></div></div>                                                    ').prependTo(n)}},testCommentsOpened:function(t){1===parseInt(t,10)?(1===Number(jetpackCarouselStrings.is_logged_in)?e(".jp-carousel-commentlink").fadeIn("fast"):e(".jp-carousel-buttons").fadeIn("fast"),v.fadeIn("fast")):(1===Number(jetpackCarouselStrings.is_logged_in)?e(".jp-carousel-commentlink").fadeOut("fast"):e(".jp-carousel-buttons").fadeOut("fast"),v.fadeOut("fast"))},getComments:function(t){if(clearInterval(m),"object"==typeof t&&void 0!==t.attachment_id&&t.attachment_id){(!t.offset||void 0===t.offset||t.offset<1)&&(t.offset=0);var a=e(".jp-carousel-comments"),n=e("#jp-carousel-comments-loading").show();t.clear&&a.hide().empty(),e.ajax({type:"GET",url:jetpackCarouselStrings.ajaxurl,dataType:"json",data:{action:"get_attachment_comments",nonce:jetpackCarouselStrings.nonce,id:t.attachment_id,offset:t.offset},success:function(o){t.clear&&a.fadeOut("fast").empty(),e(o).each(function(){var n=e("<div></div>").addClass("jp-carousel-comment").attr("id","jp-carousel-comment-"+this.id).html('<div class="comment-gravatar">'+this.gravatar_markup+'</div><div class="comment-author">'+this.author_markup+'</div><div class="comment-date">'+this.date_gmt+'</div><div class="comment-content">'+this.content+"</div>");a.append(n),clearInterval(m),m=setInterval(function(){e(".jp-carousel-overlay").height()-150<e(".jp-carousel-wrap").scrollTop()+e(window).height()&&(i.jp_carousel("getComments",{attachment_id:t.attachment_id,offset:t.offset+10,clear:!1}),clearInterval(m))},300)});var r=e(".jp-carousel div.selected");if(r&&r.data&&r.data("attachment-id")!=t.attachment_id)return a.fadeOut("fast"),void a.empty();e(".jp-carousel-overlay").height(e(window).height()+g.height()+v.height()+(a.height()>0?a.height():h.height())+200),a.show(),n.hide()},error:function(e,t,i){console.log("Comment get fail...",e,t,i),a.fadeIn("fast"),n.fadeOut("fast")}})}},postCommentError:function(t){"object"!=typeof t&&(t={}),t.field&&void 0!==t.field&&t.error&&void 0!==t.error&&(e("#jp-carousel-comment-post-results").slideUp("fast").html('<span class="jp-carousel-comment-post-error">'+t.error+"</span>").slideDown("fast"),e("#jp-carousel-comment-form-spinner").spin(!1))},setCommentIframeSrc:function(t){var a=e("#jp-carousel-comment-iframe");a&&a.length&&(a.attr("src",a.attr("src").replace(/(postid=)\d+/,"$1"+t)),a.attr("src",a.attr("src").replace(/(%23.+)?$/,"%23jp-carousel-"+t)))},clearCommentTextAreaValue:function(){var t=e("#jp-carousel-comment-form-comment-field");t&&t.val("")},nextSlide:function(){var e=this.jp_carousel("slides"),t=this.jp_carousel("selectedSlide");return 0===t.length||e.length>2&&t.is(e.last())?e.first():t.next()},prevSlide:function(){var e=this.jp_carousel("slides"),t=this.jp_carousel("selectedSlide");return 0===t.length||e.length>2&&t.is(e.first())?e.last():t.prev()},loadFullImage:function(t){var a=t.find("img:first");a.data("loaded")||(a.on("load.jetpack",function(){a.off("load.jetpack"),e(this).closest(".jp-carousel-slide").css("background-image","")}),!t.data("preview-image")||t.data("thumb-size")&&t.width()>t.data("thumb-size").width?a.attr("src",a.closest(".jp-carousel-slide").data("src")).attr("itemprop","image"):a.attr("src",t.data("preview-image")).attr("itemprop","image"),a.data("loaded",1))},hasMultipleImages:function(){return i.jp_carousel("slides").length>1}};e.fn.jp_carousel=function(t){return I[t]?I[t].apply(this,Array.prototype.slice.call(arguments,1)):"object"!=typeof t&&t?void e.error("Method "+t+" does not exist on jQuery.jp_carousel"):I.open.apply(this,arguments)},e(document.body).on("click.jp-carousel","div.gallery,div.tiled-gallery, a.single-image-gallery",function(t){e(this).jp_carousel("testForData",t.currentTarget)&&(e(t.target).parent().hasClass("gallery-caption")||(t.preventDefault(),t.stopPropagation(),e(this).jp_carousel("open",{start_index:e(this).find(".gallery-item, .tiled-gallery-item").index(e(t.target).parents(".gallery-item, .tiled-gallery-item"))})))}),1===Number(jetpackCarouselStrings.single_image_gallery)&&e("a img[data-attachment-id]").each(function(){var t=e(this).parent();if(!t.parent(".gallery-icon").length){var a=!1;e(t).attr("href")===e(this).attr("data-orig-file")&&1===Number(jetpackCarouselStrings.single_image_gallery_media_file)&&(a=!0),e(t).attr("href")===e(this).attr("data-permalink")&&(a=!0),a&&(e(t).addClass("single-image-gallery"),e(t).data("carousel-extra",{blog_id:Number(jetpackCarouselStrings.blog_id)}))}}),e(window).on("hashchange.jp-carousel",function(){var t,a,o,r=/jp-carousel-(\d+)/;window.location.hash&&r.test(window.location.hash)?window.location.hash===j&&i.opened||(window.location.hash&&i&&!i.opened&&history.back?history.back():(j=window.location.hash,t=window.location.hash.match(r),a=parseInt(t[1],10),e("div.gallery, div.tiled-gallery, a.single-image-gallery").each(function(t,i){if(e(i).find("img").each(function(t,n){if(e(n).data("attachment-id")===parseInt(a,10))return o={index:t,gallery:i},!1}),o)return e(o.gallery).jp_carousel("openOrSelectSlide",o.index),!1}))):i&&i.opened&&n.jp_carousel("close")}),window.location.hash&&e(window).trigger("hashchange")}),function(e){e.fn.touchwipe=function(t){var a={min_move_x:20,min_move_y:20,wipeLeft:function(){},wipeRight:function(){},wipeUp:function(){},wipeDown:function(){},preventDefaultEvents:!0};return t&&e.extend(a,t),this.each(function(){function e(){this.removeEventListener("touchmove",t),i=null,o=!1}function t(t){if(a.preventDefaultEvents&&t.preventDefault(),o){var r=t.touches[0].pageX,s=t.touches[0].pageY,l=i-r,c=n-s;Math.abs(l)>=a.min_move_x?(e(),l>0?a.wipeLeft(t):a.wipeRight(t)):Math.abs(c)>=a.min_move_y&&(e(),c>0?a.wipeDown(t):a.wipeUp(t))}}var i,n,o=!1;"ontouchstart"in document.documentElement&&this.addEventListener("touchstart",function(e){1===e.touches.length&&(i=e.touches[0].pageX,n=e.touches[0].pageY,o=!0,this.addEventListener("touchmove",t,!1))},!1)}),this}}(jQuery);
//# sourceMappingURL=maps/detect-zoom.js.map
